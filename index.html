function loadGames() {
            document.getElementById('gamesContent').innerHTML = `
                <div style="padding: 20px; background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 100%); min-height: 100vh;">
                    <div style="text-align: center; margin-bottom: 30px; color: #ff6b35;">
                        <h1 style="font-size: 2.5em; font-weight: bold; margin-bottom: 10px;" class="rainbow-text">üéÆ Fun Games with Friends! üéÆ</h1>
                        <p>Meet your animated friends and play together!</p>
                    </div>

                    <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 30px; max-width: 1000px; margin: 0 auto;">
                        
                        <!-- Sunny's Color Game -->
                        <div style="background: white; border-radius: 20px; padding: 30px; text-align: center; box-shadow: 0 10px 25px rgba(0,0,0,0.1); border: 3px solid #ffd700;">
                            <div class="game-character" onclick="playSunnyGame()" id="sunnyChar">‚òÄÔ∏è</div>
                            <h3 style="color: #ff6b35; margin: 15px 0;">Sunny's Color Game</h3>
                            <div id="sunnyBubble" style="min-height: 60px; display: flex; align-items: center; justify-content: center;"></div>
                            <button class="game-button" onclick="startColorGame()">üåà Play Colors!</button>
                        </div>

                        <!-- Luna's Shape Game -->
                        <div style="background: white; border-radius: 20px; padding: 30px; text-align: center; box-shadow: 0 10px 25px rgba(0,0,0,0.1); border: 3px solid #9c27b0;">
                            <div class="game-character" onclick="playLunaGame()" id="lunaChar">üåô</div>
                            <h3 style="color: #ff6b35; margin: 15px 0;">Luna's Shape Game</h3>
                            <div id="lunaBubble" style="min-height: 60px; display: flex; align-items: center; justify-content: center;"></div>
                            <button class="game-button" onclick="startShapeGame()">‚≠ê Find Shapes!</button>
                        </div>

                        <!-- Buddy's Counting Game -->
                        <div style="background: white; border-radius: 20px; padding: 30px; text-align: center; box-shadow: 0 10px 25px rgba(0,0,0,0.1); border: 3px solid #4caf50;">
                            <div class="game-character" onclick="playBuddyGame()" id="buddyChar">üêª</div>
                            <h3 style="color: #ff6b35; margin: 15px 0;">Buddy's Counting Game</h3>
                            <div id="buddyBubble" style="min-height: 60px; display: flex; align-items: center; justify-content: center;"></div>
                            <button class="game-button" onclick="startCountingGame()">üî¢ Count Together!</button>
                        </div>

                        <!-- Splash's Memory Game -->
                        <div style="background: white; border-radius: 20px; padding: 30px; text-text-center; box-shadow: 0 10px 25px rgba(0,0,0,0.1); border: 3px solid #2196f3;">
                            <div class="game-character" onclick="playSplashGame()" id="splashChar">üê†</div>
                            <h3 style="color: #ff6b35; margin: 15px 0;">Splash's Memory Game</h3>
                            <div id="splashBubble" style="min-height: 60px; display: flex; align-items: center; justify-content: center;"></div>
                            <button class="game-button" onclick="startMemoryGame()">üß† Remember!</button>
                        </div>

                    </div>

                    <!-- Game Area -->
                    <div id="gamePlayArea" style="margin-top: 40px; background: white; border-radius: 20px; padding: 30px; box-shadow: 0 10px 25px rgba(0,0,0,0.1); display: none;">
                        <div style="text-align: center; margin-bottom: 20px;">
                            <h2 id="gameTitle" style="color: #ff6b35;">Let's Play!</h2>
                            <div id="gameCharacter" style="font-size: 4em; margin: 20px 0;"></div>
                            <div id="gameInstructions" style="background: #f3e5f5; padding: 15px; border-radius: 15px; margin: 15px 0;"></div>
                        </div>
                        <div id="gameContent" style="min-height: 200px;"></div>
                        <div style="text-align: center; margin-top: 20px;">
                            <button class="game-button" onclick="closeGame()">üè† Back to Friends</button>
                        </div>
                    </div>

                    <div style="text-align: center; margin-top: 30px; padding: 20px; background: rgba(255,255,255,0.8); border-radius: 15px;">
                        <h3 style="color: #ff6b35;">üéâ Game Progress üéâ</h3>
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px; margin-top: 15px;">
                            <div style="background: #ffd700; padding: 10px; border-radius: 10px; color: white; font-weight: bold;">‚òÄÔ∏è Colors: <span id="colorScore">0</span></div>
                            <div style="background: #9c27b0; padding: 10px; border-radius: 10px; color: white; font-weight: bold;">üåô Shapes: <span id="shapeScore">0</span></div>
                            <div style="background: #4caf50; padding: 10px; border-radius: 10px; color: white; font-weight: bold;">üêª Numbers: <span id="countScore">0</span></div>
                            <div style="background: #2196f3; padding: 10px; border-radius: 10px; color: white; font-weight: bold;">üê† Memory: <span id="memoryScore">0</span></div>
                        </div>
                    </div>
                </div>
            `;
            
            // Initialize game scores
            window.gameScores = {
                colors: 0,
                shapes: 0,
                counting: 0,
                memory: 0
            };
            
            // Auto-greet after a moment
            setTimeout(() => {
                speakText("Hi Kaiden! I'm Sunny! Click on me to say hello!", 'female', 1.2);
                showSpeechBubble('sunnyBubble', "Hi Kaiden! Click me! ‚òÄÔ∏è");
            }, 1000);
        }

        // Character interaction functions
        function playSunnyGame() {
            const char = document.getElementById('sunnyChar');
            char.classList.add('talking');
            speakText("Hello! I'm Sunny the Sun! I love bright colors! Want to play my color game?", 'female', 1.2);
            showSpeechBubble('sunnyBubble', "I love colors! Let's play! üåà");
            setTimeout(() => char.classList.remove('talking'), 2000);
        }

        function playLunaGame() {
            const char = document.getElementById('lunaChar');
            char.classList.add('talking');
            speakText("Hi there! I'm Luna the Moon! I love shapes and stars! Let's find shapes together!", 'female', 0.9);
            showSpeechBubble('lunaBubble', "Let's find pretty shapes! ‚≠ê");
            setTimeout(() => char.classList.remove('talking'), 2000);
        }

        function playBuddyGame() {
            const char = document.getElementById('buddyChar');
            char.classList.add('talking');
            speakText("Hey buddy! I'm Buddy the Bear! I love counting things! Let's count together!", 'male', 0.8);
            showSpeechBubble('buddyBubble', "Let's count together! 1, 2, 3! üî¢");
            setTimeout(() => char.classList.remove('talking'), 2000);
        }

        function playSplashGame() {
            const char = document.getElementById('splashChar');
            char.classList.add('talking');
            speakText("Splash! I'm Splash the Fish! I have a great memory! Let's play a memory game!", 'female', 1.1);
            showSpeechBubble('splashBubble', "Remember with me! üê†üí≠");
            setTimeout(() => char.classList.remove('talking'), 2000);
        }

        // Speech bubble helper
        function showSpeechBubble(bubbleId, message) {
            const bubble = document.getElementById(bubbleId);
            if (bubble) {
                bubble.innerHTML = `<div class="speech-bubble">${message}</div>`;
                setTimeout(() => {
                    bubble.innerHTML = '';
                }, 4000);
            }
        }

        // Enhanced speech function with voice options
        function speakText(text, voice = 'female', pitch = 1.0, rate = 0.8) {
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(text);
                
                // Try to get voices
                const voices = speechSynthesis.getVoices();
                if (voices.length > 0) {
                    // Look for appropriate voice
                    const femaleVoice = voices.find(v => v.name.includes('female') || v.name.includes('Female') || v.gender === 'female');
                    const maleVoice = voices.find(v => v.name.includes('male') || v.name.includes('Male') || v.gender === 'male');
                    
                    if (voice === 'female' && femaleVoice) {
                        utterance.voice = femaleVoice;
                    } else if (voice === 'male' && maleVoice) {
                        utterance.voice = maleVoice;
                    }
                }
                
                utterance.pitch = pitch;
                utterance.rate = rate;
                utterance.volume = 0.8;
                speechSynthesis.speak(utterance);
            }
        }

        // Color Game
        function startColorGame() {
            const gameArea = document.getElementById('gamePlayArea');
            const gameTitle = document.getElementById('gameTitle');
            const gameCharacter = document.getElementById('gameCharacter');
            const gameInstructions = document.getElementById('gameInstructions');
            const gameContent = document.getElementById('gameContent');
            
            gameArea.style.display = 'block';
            gameTitle.textContent = "Sunny's Color Game";
            gameCharacter.textContent = "‚òÄÔ∏è";
            gameInstructions.textContent = "Help Sunny find the colors! Click on the color Sunny asks for!";
            
            const colors = [
                { name: 'red', color: '#f44336', emoji: '‚ù§Ô∏è' },
                { name: 'blue', color: '#2196f3', emoji: 'üíô' },
                { name: 'green', color: '#4caf50', emoji: 'üíö' },
                { name: 'yellow', color: '#ffd700', emoji: 'üíõ' },
                { name: 'purple', color: '#9c27b0', emoji: 'üíú' },
                { name: 'orange', color: '#ff9800', emoji: 'üß°' }
            ];
            
            const targetColor = colors[Math.floor(Math.random() * colors.length)];
            
            gameContent.innerHTML = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 1.5em; margin-bottom: 20px;">Find the <strong>${targetColor.name}</strong> color!</div>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; max-width: 400px; margin: 0 auto;">
                        ${colors.map(color => `
                            <div onclick="checkColor('${color.name}', '${targetColor.name}')" style="
                                width: 100px; height: 100px; background: ${color.color}; 
                                border-radius: 20px; cursor: pointer; display: flex; 
                                align-items: center; justify-content: center; font-size: 2em;
                                transition: all 0.3s ease; box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                            " onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
                                ${color.emoji}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            speakText(`Find the ${targetColor.name} color for me!`, 'female', 1.2);
            gameArea.scrollIntoView({ behavior: 'smooth' });
        }

        function checkColor(selected, target) {
            if (selected === target) {
                window.gameScores.colors++;
                document.getElementById('colorScore').textContent = window.gameScores.colors;
                speakText("Great job! You found the right color! You're amazing!", 'female', 1.2);
                createGameCelebration();
                setTimeout(() => {
                    if (Math.random() > 0.5) {
                        startColorGame(); // Play again
                    } else {
                        closeGame();
                        speakText("You did so well! Try another friend's game!", 'female', 1.2);
                    }
                }, 2000);
            } else {
                speakText("Almost! Try again! You can do it!", 'female', 1.2);
                event.target.style.animation = 'shake 0.5s ease-in-out';
            }
        }

        // Shape Game
        function startShapeGame() {
            const gameArea = document.getElementById('gamePlayArea');
            const gameTitle = document.getElementById('gameTitle');
            const gameCharacter = document.getElementById('gameCharacter');
            const gameInstructions = document.getElementById('gameInstructions');
            const gameContent = document.getElementById('gameContent');
            
            gameArea.style.display = 'block';
            gameTitle.textContent = "Luna's Shape Game";
            gameCharacter.textContent = "üåô";
            gameInstructions.textContent = "Help Luna find the shapes! Click on the shape Luna asks for!";
            
            const shapes = [
                { name: 'circle', shape: '‚≠ï', color: '#f44336' },
                { name: 'star', shape: '‚≠ê', color: '#ffd700' },
                { name: 'heart', shape: '‚ù§Ô∏è', color: '#e91e63' },
                { name: 'diamond', shape: 'üíé', color: '#2196f3' },
                { name: 'square', shape: '‚¨ú', color: '#4caf50' },
                { name: 'triangle', shape: 'üî∫', color: '#ff9800' }
            ];
            
            const targetShape = shapes[Math.floor(Math.random() * shapes.length)];
            
            gameContent.innerHTML = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 1.5em; margin-bottom: 20px;">Find the <strong>${targetShape.name}</strong> shape!</div>
                    <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 20px; max-width: 400px; margin: 0 auto;">
                        ${shapes.map(shape => `
                            <div onclick="checkShape('${shape.name}', '${targetShape.name}')" style="
                                width: 100px; height: 100px; background: white; border: 3px solid ${shape.color};
                                border-radius: 20px; cursor: pointer; display: flex; 
                                align-items: center; justify-content: center; font-size: 3em;
                                transition: all 0.3s ease; box-shadow: 0 5px 15px rgba(0,0,0,0.2);
                            " onmouseover="this.style.transform='scale(1.1)'" onmouseout="this.style.transform='scale(1)'">
                                ${shape.shape}
                            </div>
                        `).join('')}
                    </div>
                </div>
            `;
            
            speakText(`Help me find the ${targetShape.name}!`, 'female', 0.9);
            gameArea.scrollIntoView({ behavior: 'smooth' });
        }

        function checkShape(selected, target) {
            if (selected === target) {
                window.gameScores.shapes++;
                document.getElementById('shapeScore').textContent = window.gameScores.shapes;
                speakText("Perfect! You found the right shape! Luna is so proud of you!", 'female', 0.9);
                createGameCelebration();
                setTimeout(() => {
                    if (Math.random() > 0.5) {
                        startShapeGame();
                    } else {
                        closeGame();
                        speakText("You're a shape expert! Try playing with another friend!", 'female', 0.9);
                    }
                }, 2000);
            } else {
                speakText("Not quite! Look for the right shape! You're doing great!", 'female', 0.9);
                event.target.style.animation = 'shake 0.5s ease-in-out';
            }
        }

        // Counting Game
        function startCountingGame() {
            const gameArea = document.getElementById('gamePlayArea');
            const gameTitle = document.getElementById('gameTitle');
            const gameCharacter = document.getElementById('gameCharacter');
            const gameInstructions = document.getElementById('gameInstructions');
            const gameContent = document.getElementById('gameContent');
            
            gameArea.style.display = 'block';
            gameTitle.textContent = "Buddy's Counting Game";
            gameCharacter.textContent = "üêª";
            gameInstructions.textContent = "Help Buddy count! How many items do you see?";
            
            const countOptions = [1, 2, 3, 4, 5];
            const targetCount = countOptions[Math.floor(Math.random() * countOptions.length)];
            const items = ['üçé', 'üåü', 'üéà', 'üß∏', 'üéÆ', 'üìö', 'üé®', 'üéµ'];
            const selectedItem = items[Math.floor(Math.random() * items.length)];
            
            gameContent.innerHTML = `
                <div style="text-align: center; margin-bottom: 20px;">
                    <div style="font-size: 1.5em; margin-bottom: 20px;">Count the ${selectedItem} items!</div>
                    <div style="font-size: 4em; margin: 20px 0; display: flex; justify-content: center; flex-wrap: wrap; gap: 10px;">
                        ${Array(targetCount).fill(selectedItem).join(' ')}
                    </div>
                    <div style="display: flex; justify-content: center; gap: 15px; flex-wrap: wrap;">
                        ${countOptions.map(num => `
                            <button onclick="checkCount(${num}, ${targetCount})" style="
                                width: 80px; height: 80px; font-size: 2em; font-weight: bold;
                                border: 3px solid #4caf50; border-radius: 15px; background: white;
                                cursor: pointer; transition: all 0.3s ease;
                            " onmouseover="this.style.transform='scale(1.1)'; this.style.background='#e8f5e8'" onmouseout="this.style.transform='scale(1)'; this.style.background='white'">
                                ${num}
                            </button>
                        `).join('')}
                    </div>
                </div>
            `;
            
            speakText(`Help me count! How many ${selectedItem} do you see?`, 'male', 0.8);
            gameArea.scrollIntoView({ behavior: 'smooth' });
        }

        function checkCount(selected, target) {
            if (selected === target) {
                window.gameScores.counting++;
                document.getElementById('countScore').textContent = window.gameScores.counting;
                speakText(`Yes! There are ${target}! You're a great counter, buddy!`, 'male', 0.8);
                createGameCelebration();
                setTimeout(() => {
                    if (Math.random() > 0.5) {
                        startCountingGame();
                    } else {
                        closeGame();
                        speakText("You're amazing at counting! Go play with other friends!", 'male', 0.8);
                    }
                }, 2000);
            } else {
                speakText(`Not quite! Count again carefully. You can do it!`, 'male', 0.8);
                event.target.style.animation = 'shake 0.5s ease-in-out';
            }
        }

        // Memory Game
        function startMemoryGame() {
            const gameArea = document.getElementById('gamePlayArea');
            const gameTitle = document.getElementById('gameTitle');
            const gameCharacter = document.getElementById('gameCharacter');
            const gameInstructions = document.getElementById('gameInstructions');
            const gameContent = document.getElementById('gameContent');
            
            gameArea.style.display = 'block';
            gameTitle.textContent = "Splash's Memory Game";
            gameCharacter.textContent = "üê†";
            gameInstructions.textContent = "Watch the sequence, then click in the same order!";
            
            const memoryItems = ['üê†', 'üêô', 'ü¶Ä', 'üåä', '‚≠ê', 'üêö'];
            const sequence = [];
            const sequenceLength = Math.min(3, window.gameScores.memory + 2); // Progressive difficulty
            
            for (let i = 0; i < sequenceLength; i++) {
                sequence.push(memoryItems[Math.floor(Math.random() * memoryItems.length)]);
            }
            
            gameContent.innerHTML = `
                <div style="text-align: center;">
                    <div style="font-size: 1.5em; margin-bottom: 20px;">Watch carefully!</div>
                    <div id="memoryDisplay" style="font-size: 4em; min-height: 100px; display: flex; align-items: center; justify-content: center; margin: 20px 0;"></div>
                    <div id="memoryButtons" style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 15px; max-width: 300px; margin: 0 auto; opacity: 0.5;">
                        ${memoryItems.map(item => `
                            <button onclick="memoryClick('${item}')" style="
                                width: 80px; height: 80px; font-size: 2.5em; 
                                border: 3px solid #2196f3; border-radius: 15px; background: white;
                                cursor: pointer; transition: all 0.3s ease;
                            " disabled>
                                ${item}
                            </button>
                        `).join('')}
                    </div>
                    <div style="margin-top: 20px; font-size: 1.2em; color: #666;">
                        <span id="memoryProgress">Get ready...</span>
                    </div>
                </div>
            `;
            
            speakText("Watch the sequence carefully, then repeat it!", 'female', 1.1);
            
            // Show sequence
            window.memorySequence = sequence;
            window.memoryPosition = 0;
            showMemorySequence(sequence);
            
            gameArea.scrollIntoView({ behavior: 'smooth' });
        }

        function showMemorySequence(sequence) {
            const display = document.getElementById('memoryDisplay');
            const progress = document.getElementById('memoryProgress');
            let index = 0;
            
            progress.textContent = `Watch: ${sequence.length} items`;
            
            const showNext = () => {
                if (index < sequence.length) {
                    display.textContent = sequence[index];
                    display.style.animation = 'bounce 0.5s ease';
                    setTimeout(() => {
                        display.style.animation = '';
                        display.textContent = 'üí≠';
                        index++;
                        setTimeout(showNext, 800);
                    }, 600);
                } else {
                    display.textContent = '‚ùì';
                    progress.textContent = 'Now you try!';
                    document.getElementById('memoryButtons').style.opacity = '1';
                    document.querySelectorAll('#memoryButtons button').forEach(btn => {
                        btn.disabled = false;
                        btn.onmouseover = function() {
                            this.style.transform = 'scale(1.1)';
                            this.style.background = '#e3f2fd';
                        };
                        btn.onmouseout = function() {
                            this.style.transform = 'scale(1)';
                            this.style.background = 'white';
                        };
                    });
                    speakText("Now click the sequence in the same order!", 'female', 1.1);
                }
            };
            
            setTimeout(showNext, 1000);
        }

        function memoryClick(item) {
            const sequence = window.memorySequence;
            const position = window.memoryPosition;
            
            if (item === sequence[position]) {
                window.memoryPosition++;
                document.getElementById('memoryProgress').textContent = `Correct! ${window.memoryPosition}/${sequence.length}`;
                
                if (window.memoryPosition >= sequence.length) {
                    window.gameScores.memory++;
                    document.getElementById('memoryScore').textContent = window.gameScores.memory;
                    speakText("Perfect memory! Splash is so impressed!", 'female', 1.1);
                    createGameCelebration();
                    setTimeout(() => {
                        if (Math.random() > 0.4) {
                            startMemoryGame(); // Progressive difficulty
                        } else {
                            closeGame();
                            speakText("Your memory is incredible! Try other games!", 'female', 1.1);
                        }
                    }, 2000);
                }
            } else {
                speakText("Oops! Let's try that sequence again!", 'female', 1.1);
                event.target.style.animation = 'shake 0.5s ease-in-out';
                setTimeout(() => {
                    window.memoryPosition = 0;
                    document.getElementById('memoryButtons').style.opacity = '0.5';
                    document.querySelectorAll('#memoryButtons button').forEach(btn => btn.disabled = true);
                    showMemorySequence(sequence);
                }, 1000);
            }
        }

        function closeGame() {
            const gameArea = document.getElementById('gamePlayArea');
            gameArea.style.display = 'none';
            
            // Random encouragement from characters
            const encouragements = [
                { text: "Thanks for playing with me! You're awesome!", voice: 'female', pitch: 1.2 },
                { text: "You did great, buddy! Come back anytime!", voice: 'male', pitch: 0.8 },
                { text: "That was so much fun! You're really smart!", voice: 'female', pitch: 0.9 },
                { text: "Splash splash! You have an amazing brain!", voice: 'female', pitch: 1.1 }
            ];
            
            const encouragement = encouragements[Math.floor(Math.random() * encouragements.length)];
            speakText(encouragement.text, encouragement.voice, encouragement.pitch);
        }

        function createGameCelebration() {
            const celebrations = ['üéâ', '‚≠ê', 'üåü', 'üí´', 'üéà', 'üéä', 'üèÜ', 'üëè'];
            for (let i = 0; i < 8; i++) {
                setTimeout(() => {
                    const celebration = document.createElement('div');
                    celebration.style.cssText = `
                        position: fixed; pointer-events: none; font-size: 3em; z-index: 1000;
                        animation: celebrationFloat 2s ease-out forwards;
                    `;
                    celebration.textContent = celebrations[Math.floor(Math.random() * celebrations.length)];
                    celebration.style.left = Math.random() * window.innerWidth + 'px';
                    celebration.style.top = window.innerHeight + 'px';
                    document.body.appendChild(celebration);
                    
                    setTimeout(() => {
                        if (celebration.parentNode) {
                            celebration.parentNode.removeChild(celebration);
                        }
                    }, 2000);
                }, i * 200);
            }
        }

        // Add shake animation for wrong answers
        const shakeStyle = document.createElement('style');
        shakeStyle.textContent = `
            @keyframes shake {
                0%, 100% { transform: translateX(0); }
                25% { transform: translateX(-10px); }
                75% { transform: translateX(10px); }
            }
            
            @keyframes celebrationFloat {
                0% {
                    transform: translateY(0px) rotate(0deg);
                    opacity: 1;
                }
                100% {
                    transform: translateY(-300px) rotate(360deg);
                    opacity: 0;
                }
            }
            
            @keyframes bounce {
                0%, 100% {
                    transform: scale(1);
                }
                50% {
                    transform: scale(1.2);
                }
            }
        `;
        document.head.appendChild(shakeStyle);        function loadVisualSchedule() {
            document.getElementById('visualScheduleContent').innerHTML = `
                <div style="padding: 20px; background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); min-height: 100vh;">
                    <div style="text-align: center; margin-bottom:<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kaiden's World</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 20px;
        }

        .main-header {
            text-align: center;
            margin-bottom: 50px;
            color: white;
        }

        .main-title {
            font-size: 3.5em;
            font-weight: bold;
            margin-bottom: 15px;
            text-shadow: 3px 3px 6px rgba(0,0,0,0.3);
            animation: titleGlow 3s ease-in-out infinite alternate;
        }

        @keyframes titleGlow {
            0% { text-shadow: 3px 3px 6px rgba(0,0,0,0.3); }
            100% { text-shadow: 3px 3px 6px rgba(255,255,255,0.3), 0 0 20px rgba(255,255,255,0.2); }
        }

        .subtitle {
            font-size: 1.3em;
            opacity: 0.9;
            margin-bottom: 10px;
        }

        .welcome-message {
            font-size: 1.1em;
            opacity: 0.8;
        }

        .app-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 30px;
            max-width: 1000px;
            width: 100%;
            margin-bottom: 40px;
        }

        .app-card {
            background: white;
            border-radius: 25px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s ease;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            border: 4px solid transparent;
            position: relative;
            overflow: hidden;
        }

        .app-card::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: linear-gradient(45deg, transparent, rgba(255,255,255,0.1), transparent);
            transform: rotate(45deg);
            transition: all 0.5s ease;
            opacity: 0;
        }

        .app-card:hover::before {
            animation: shimmer 1.5s ease-in-out;
        }

        @keyframes shimmer {
            0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); opacity: 0; }
            50% { opacity: 1; }
            100% { transform: translateX(100%) translateY(100%) rotate(45deg); opacity: 0; }
        }

        .app-card:hover {
            transform: translateY(-10px) scale(1.03);
            box-shadow: 0 20px 40px rgba(0,0,0,0.3);
        }

        .app-card.choice-board {
            border-color: #1976d2;
        }

        .app-card.choice-board:hover {
            border-color: #1976d2;
            background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 20%, white 20%);
        }

        .app-card.sound-explorer {
            border-color: #7b1fa2;
        }

        .app-card.sound-explorer:hover {
            border-color: #7b1fa2;
            background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 20%, white 20%);
        }

        .app-card.visual-schedule {
            border-color: #2e7d32;
        }

        .app-card.visual-schedule:hover {
            border-color: #2e7d32;
            background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 20%, white 20%);
        }

        .app-icon {
            font-size: 4em;
            margin-bottom: 20px;
            display: block;
            transition: all 0.3s ease;
        }

        .app-card:hover .app-icon {
            transform: scale(1.2) rotate(5deg);
        }

        .app-title {
            font-size: 1.8em;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }

        .app-description {
            font-size: 1em;
            color: #666;
            line-height: 1.5;
            margin-bottom: 20px;
        }

        .app-features {
            display: flex;
            justify-content: center;
            gap: 10px;
            flex-wrap: wrap;
        }

        .feature-tag {
            background: #f0f0f0;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            color: #555;
            border: 1px solid #ddd;
        }

        .app-card.choice-board .feature-tag {
            background: #e3f2fd;
            border-color: #1976d2;
            color: #1976d2;
        }

        .app-card.sound-explorer .feature-tag {
            background: #f3e5f5;
            border-color: #7b1fa2;
            color: #7b1fa2;
        }

        .app-card.games {
            border-color: #ff6b35;
        }

        .app-card.games:hover {
            border-color: #ff6b35;
            background: linear-gradient(135deg, #fff3e0 0%, #ffe0b2 20%, white 20%);
        }

        .app-card.games .feature-tag {
            background: #fff3e0;
            border-color: #ff6b35;
            color: #ff6b35;
        }

        /* Game character animations */
        .game-character {
            font-size: 6em;
            display: inline-block;
            transition: all 0.3s ease;
            cursor: pointer;
            animation: characterBreathe 3s ease-in-out infinite;
        }

        @keyframes characterBreathe {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        .game-character:hover {
            animation: characterExcited 0.6s ease-in-out infinite;
        }

        @keyframes characterExcited {
            0%, 100% {
                transform: scale(1) rotate(0deg);
            }
            25% {
                transform: scale(1.1) rotate(-5deg);
            }
            75% {
                transform: scale(1.1) rotate(5deg);
            }
        }

        .game-character.talking {
            animation: characterTalk 0.3s ease-in-out infinite;
        }

        @keyframes characterTalk {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.15);
            }
        }

        .speech-bubble {
            background: white;
            border: 3px solid #ff6b35;
            border-radius: 20px;
            padding: 15px 25px;
            margin: 20px 0;
            position: relative;
            animation: bubblePop 0.5s ease-out;
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
        }

        .speech-bubble::before {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            margin-left: -15px;
            width: 0;
            height: 0;
            border: 15px solid transparent;
            border-top-color: #ff6b35;
        }

        .speech-bubble::after {
            content: '';
            position: absolute;
            bottom: -9px;
            left: 50%;
            margin-left: -12px;
            width: 0;
            height: 0;
            border: 12px solid transparent;
            border-top-color: white;
        }

        @keyframes bubblePop {
            0% {
                transform: scale(0.3);
                opacity: 0;
            }
            70% {
                transform: scale(1.05);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .game-button {
            background: linear-gradient(135deg, #ff6b35, #ff8a50);
            color: white;
            border: none;
            padding: 15px 30px;
            border-radius: 25px;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(255,107,53,0.3);
            margin: 10px;
        }

        .game-button:hover {
            transform: translateY(-2px) scale(1.05);
            box-shadow: 0 8px 20px rgba(255,107,53,0.4);
            animation: buttonWiggle 0.5s ease-in-out;
        }

        @keyframes buttonWiggle {
            0%, 100% { transform: translateY(-2px) scale(1.05) rotate(0deg); }
            25% { transform: translateY(-2px) scale(1.05) rotate(1deg); }
            75% { transform: translateY(-2px) scale(1.05) rotate(-1deg); }
        }

        .rainbow-text {
            background: linear-gradient(45deg, #ff6b35, #f7931e, #ffd700, #4caf50, #2196f3, #9c27b0);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: rainbowShift 3s linear infinite;
            background-size: 200% 100%;
        }

        @keyframes rainbowShift {
            0% {
                background-position: 0% 50%;
            }
            100% {
                background-position: 200% 50%;
            }
        }

        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.9);
            color: #333;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            display: none;
            z-index: 1000;
        }

        .back-button:hover {
            background: white;
            transform: scale(1.05);
        }

        .app-container {
            display: none;
            width: 100%;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            background: white;
            z-index: 500;
            overflow: auto;
        }

        .app-container.active {
            display: block;
        }

        .stats-area {
            background: rgba(255,255,255,0.95);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 20px;
            color: #333;
            text-align: center;
            margin-bottom: 20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            border: 2px solid rgba(255,255,255,0.8);
            animation: fadeInUp 1s ease-out;
        }

        @keyframes fadeInUp {
            0% {
                opacity: 0;
                transform: translateY(30px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 15px;
            margin-top: 15px;
        }

        .stat-item {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 12px;
            border-radius: 15px;
            border: 2px solid rgba(255,255,255,0.3);
            color: white;
            box-shadow: 0 3px 10px rgba(0,0,0,0.2);
            animation: bounceIn 1.2s ease-out;
            animation-delay: var(--delay, 0s);
        }

        @keyframes bounceIn {
            0% {
                opacity: 0;
                transform: scale(0.3);
            }
            50% {
                transform: scale(1.05);
            }
            70% {
                transform: scale(0.9);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .stat-item:nth-child(1) { animation-delay: 0.2s; }
        .stat-item:nth-child(2) { animation-delay: 0.4s; }
        .stat-item:nth-child(3) { animation-delay: 0.6s; }
        .stat-item:nth-child(4) { animation-delay: 0.8s; }
        .stat-item:nth-child(5) { animation-delay: 1.0s; }

        .stat-number {
            font-size: 2em;
            font-weight: bold;
            display: block;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
            animation: countUp 2s ease-out;
            animation-delay: 1s;
            animation-fill-mode: both;
        }

        @keyframes countUp {
            0% {
                transform: scale(0.5);
                opacity: 0;
            }
            50% {
                transform: scale(1.2);
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
            font-weight: 500;
            animation: slideInLeft 1s ease-out;
            animation-delay: 1.2s;
            animation-fill-mode: both;
        }

        @keyframes slideInLeft {
            0% {
                opacity: 0;
                transform: translateX(-20px);
            }
            100% {
                opacity: 0.9;
                transform: translateX(0);
            }
        }

        .stats-area h3 {
            color: #333;
            font-size: 1.4em;
            margin-bottom: 5px;
            font-weight: bold;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% {
                transform: scale(1);
            }
            50% {
                transform: scale(1.05);
            }
        }

        .main-header {
            text-align: center;
            margin-bottom: 50px;
            color: white;
            animation: fadeInDown 1.5s ease-out;
        }

        @keyframes fadeInDown {
            0% {
                opacity: 0;
                transform: translateY(-50px);
            }
            100% {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .app-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            max-width: 1200px;
            width: 100%;
            margin-bottom: 40px;
            animation: fadeInScale 1.5s ease-out;
            animation-delay: 0.5s;
            animation-fill-mode: both;
        }

        @keyframes fadeInScale {
            0% {
                opacity: 0;
                transform: scale(0.8);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .app-card {
            background: white;
            border-radius: 25px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            transition: all 0.4s ease;
            box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            border: 4px solid transparent;
            position: relative;
            overflow: hidden;
            animation: slideInUp 1s ease-out;
            animation-delay: var(--card-delay, 0s);
            animation-fill-mode: both;
        }

        .app-card:nth-child(1) { --card-delay: 0.8s; }
        .app-card:nth-child(2) { --card-delay: 1.0s; }
        .app-card:nth-child(3) { --card-delay: 1.2s; }
        .app-card:nth-child(4) { --card-delay: 1.4s; }

        @keyframes slideInUp {
            0% {
                opacity: 0;
                transform: translateY(50px) scale(0.9);
            }
            100% {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .app-icon {
            font-size: 4em;
            margin-bottom: 20px;
            display: block;
            transition: all 0.3s ease;
            animation: float 3s ease-in-out infinite;
            animation-delay: var(--float-delay, 0s);
        }

        .app-card:nth-child(1) .app-icon { --float-delay: 0s; }
        .app-card:nth-child(2) .app-icon { --float-delay: 1s; }
        .app-card:nth-child(3) .app-icon { --float-delay: 2s; }
        .app-card:nth-child(4) .app-icon { --float-delay: 3s; }

        @keyframes float {
            0%, 100% {
                transform: translateY(0px) rotate(0deg);
            }
            33% {
                transform: translateY(-10px) rotate(2deg);
            }
            66% {
                transform: translateY(-5px) rotate(-1deg);
            }
        }

        .app-card:hover .app-icon {
            transform: scale(1.2) rotate(5deg);
            animation-play-state: paused;
        }

        .feature-tag {
            background: #f0f0f0;
            padding: 5px 12px;
            border-radius: 15px;
            font-size: 0.8em;
            color: #555;
            border: 1px solid #ddd;
            animation: popIn 0.6s ease-out;
            animation-delay: calc(var(--tag-delay, 0s) + 1.5s);
            animation-fill-mode: both;
        }

        .feature-tag:nth-child(1) { --tag-delay: 0.1s; }
        .feature-tag:nth-child(2) { --tag-delay: 0.2s; }
        .feature-tag:nth-child(3) { --tag-delay: 0.3s; }

        @keyframes popIn {
            0% {
                opacity: 0;
                transform: scale(0.5);
            }
            80% {
                transform: scale(1.1);
            }
            100% {
                opacity: 1;
                transform: scale(1);
            }
        }

        .back-button {
            position: fixed;
            top: 20px;
            left: 20px;
            background: rgba(255,255,255,0.9);
            color: #333;
            border: none;
            padding: 12px 20px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
            display: none;
            z-index: 1000;
            animation: slideInLeft 0.5s ease-out;
        }

        @keyframes slideInLeft {
            0% {
                opacity: 0;
                transform: translateX(-30px);
            }
            100% {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .back-button:hover {
            background: white;
            transform: scale(1.05) translateX(5px);
            animation: wiggle 0.5s ease-in-out;
        }

        @keyframes wiggle {
            0%, 100% { transform: scale(1.05) translateX(5px) rotate(0deg); }
            25% { transform: scale(1.05) translateX(5px) rotate(2deg); }
            75% { transform: scale(1.05) translateX(5px) rotate(-2deg); }
        }

        /* Add subtle loading animation when switching apps */
        .app-container {
            display: none;
            width: 100%;
            height: 100vh;
            position: fixed;
            top: 0;
            left: 0;
            background: white;
            z-index: 500;
            overflow: auto;
        }

        .app-container.active {
            display: block;
            animation: fadeIn 0.5s ease-out;
        }

        @keyframes fadeIn {
            0% {
                opacity: 0;
            }
            100% {
                opacity: 1;
            }
        }

        /* Floating particles in background */
        .floating-particles {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: -1;
        }

        .particle {
            position: absolute;
            font-size: 20px;
            animation: floatParticle 15s linear infinite;
            opacity: 0.3;
        }

        @keyframes floatParticle {
            0% {
                transform: translateY(100vh) rotate(0deg);
                opacity: 0;
            }
            10% {
                opacity: 0.3;
            }
            90% {
                opacity: 0.3;
            }
            100% {
                transform: translateY(-100px) rotate(360deg);
                opacity: 0;
            }
        }

        /* Gentle pulsing for important elements */
        .choice-card:hover,
        .sound-card:hover,
        .app-card:hover {
            animation: gentlePulse 1s ease-in-out;
        }

        @keyframes gentlePulse {
            0%, 100% {
                box-shadow: 0 10px 30px rgba(0,0,0,0.2);
            }
            50% {
                box-shadow: 0 15px 40px rgba(0,0,0,0.3);
            }
        }

        /* Choice Board Styles */
        .tab-button {
            padding: 12px 15px; 
            font-size: 1em; 
            font-weight: bold; 
            border: 3px solid #1976d2;
            border-radius: 20px; 
            background: white; 
            color: #1976d2; 
            cursor: pointer;
            transition: all 0.3s ease; 
            min-width: 80px;
            margin: 2px;
        }
        .tab-button:hover { 
            transform: scale(1.05); 
            box-shadow: 0 5px 15px rgba(0,0,0,0.2); 
        }
        .tab-button.active { 
            background: #1976d2; 
            color: white; 
        }
        .choice-card {
            background: white; 
            border-radius: 20px; 
            padding: 20px; 
            text-align: center;
            cursor: pointer; 
            transition: all 0.3s ease; 
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            border: 3px solid transparent; 
            min-height: 180px;
            display: flex; 
            flex-direction: column; 
            justify-content: center; 
            align-items: center;
        }
        .choice-card:hover {
            transform: translateY(-5px) scale(1.02); 
            box-shadow: 0 10px 25px rgba(0,0,0,0.2);
            border-color: #4caf50;
        }
        .choice-card.selected { 
            background: #e8f5e8; 
            border-color: #4caf50; 
            transform: scale(1.05); 
        }
        .choice-icon { 
            font-size: 4em; 
            margin-bottom: 15px; 
        }
        .choice-text { 
            font-size: 1.4em; 
            font-weight: bold; 
            color: #333; 
            margin-bottom: 5px; 
        }
        .choice-subtext { 
            font-size: 0.9em; 
            color: #666; 
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .main-title {
                font-size: 2.5em;
            }
            
            .app-grid {
                grid-template-columns: 1fr;
                gap: 20px;
            }
            
            .app-card {
                padding: 25px;
            }
            
            .app-icon {
                font-size: 3em;
            }
            
            .app-title {
                font-size: 1.5em;
            }
            
            .back-button {
                padding: 10px 15px;
                font-size: 0.9em;
            }
            
            .tab-button {
                padding: 10px 12px;
                font-size: 0.9em;
                min-width: 70px;
            }
        }
    </style>
</head>
<body>
    <button class="back-button" id="backButton" onclick="goHome()">üè† Home</button>

    <!-- Floating Particles Background -->
    <div class="floating-particles" id="floatingParticles"></div>

    <!-- Main Menu -->
    <div id="mainMenu" class="main-menu">
        <div class="main-header">
            <h1 class="main-title">üåü Kaiden's World üåü</h1>
            <p class="subtitle">Your Special Communication & Learning Space</p>
            <p class="welcome-message">Choose what you'd like to do today!</p>
        </div>

        <div class="stats-area">
            <h3>Your Progress</h3>
            <div class="stats-grid">
                <div class="stat-item">
                    <span class="stat-number" id="totalChoices">72</span>
                    <span class="stat-label">Communication Choices</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="totalSounds">46</span>
                    <span class="stat-label">Sounds to Explore</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="totalActivities">20</span>
                    <span class="stat-label">Schedule Activities</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="totalGames">4</span>
                    <span class="stat-label">Fun Games</span>
                </div>
                <div class="stat-item">
                    <span class="stat-number" id="sessionsToday">0</span>
                    <span class="stat-label">Sessions Today</span>
                </div>
            </div>
        </div>

        <div class="app-grid">
            <div class="app-card choice-board" onclick="openApp('choiceBoard')" style="cursor: pointer;">
                <span class="app-icon">üí¨</span>
                <div class="app-title">Choice Board</div>
                <div class="app-description">
                    Tell everyone what you need, how you feel, and what you want to do. 
                    Perfect for everyday communication!
                </div>
                <div class="app-features">
                    <span class="feature-tag">72 Choices</span>
                    <span class="feature-tag">7 Categories</span>
                    <span class="feature-tag">Voice Output</span>
                </div>
            </div>

            <div class="app-card sound-explorer" onclick="openApp('soundExplorer')" style="cursor: pointer;">
                <span class="app-icon">üéµ</span>
                <div class="app-title">Sound Explorer</div>
                <div class="app-description">
                    Discover amazing sounds from animals, vehicles, music and nature. 
                    Play games and learn through sound!
                </div>
                <div class="app-features">
                    <span class="feature-tag">46 Sounds</span>
                    <span class="feature-tag">6 Categories</span>
                    <span class="feature-tag">Fun Games</span>
                </div>
            </div>

            <div class="app-card visual-schedule" onclick="openApp('visualSchedule')" style="cursor: pointer;">
                <span class="app-icon">üìÖ</span>
                <div class="app-title">My Schedule</div>
                <div class="app-description">
                    Build your daily routine with pictures. See what's coming next 
                    and feel proud when you complete activities!
                </div>
                <div class="app-features">
                    <span class="feature-tag">Drag & Drop</span>
                    <span class="feature-tag">Progress Tracking</span>
                    <span class="feature-tag">Celebrations</span>
                </div>
            </div>

            <div class="app-card games" onclick="openApp('games')" style="cursor: pointer; border-color: #ff6b35;">
                <span class="app-icon">üéÆ</span>
                <div class="app-title">Fun Games</div>
                <div class="app-description">
                    Play with animated friends! Meet Sunny the Sun, Luna the Moon, and more characters in fun learning games!
                </div>
                <div class="app-features">
                    <span class="feature-tag">Animated Friends</span>
                    <span class="feature-tag">Learning Games</span>
                    <span class="feature-tag">Voice Characters</span>
                </div>
            </div>

            <div class="app-card" onclick="window.location.href='social-stories.html'" style="cursor: pointer; border-color: #e91e63;">
                <span class="app-icon">üìñ</span>
                <div class="app-title">Social Stories</div>
                <div class="app-description">
                    Learn about new experiences with picture stories! Going to the doctor, birthday parties, and more.
                </div>
                <div class="app-features">
                    <span class="feature-tag" style="background: #fce4ec; border-color: #e91e63; color: #e91e63;">6 Stories</span>
                    <span class="feature-tag" style="background: #fce4ec; border-color: #e91e63; color: #e91e63;">Read to Me</span>
                    <span class="feature-tag" style="background: #fce4ec; border-color: #e91e63; color: #e91e63;">7 Pages Each</span>
                </div>
            </div>

            <div class="app-card" onclick="window.location.href='wait-timer.html'" style="cursor: pointer; border-color: #00acc1;">
                <span class="app-icon">‚è∞</span>
                <div class="app-title">Wait Timer</div>
                <div class="app-description">
                    See how long to wait! Visual timer with countdown, progress bar, and celebrations when done.
                </div>
                <div class="app-features">
                    <span class="feature-tag" style="background: #e0f7fa; border-color: #00acc1; color: #00acc1;">6 Presets</span>
                    <span class="feature-tag" style="background: #e0f7fa; border-color: #00acc1; color: #00acc1;">Custom Time</span>
                    <span class="feature-tag" style="background: #e0f7fa; border-color: #00acc1; color: #00acc1;">Visual Progress</span>
                </div>
            </div>

            <div class="app-card" onclick="window.location.href='emotion-chart.html'" style="cursor: pointer; border-color: #e91e63;">
                <span class="app-icon">üòä</span>
                <div class="app-title">My Feelings</div>
                <div class="app-description">
                    Learn to identify and share how you feel. Happy, sad, angry, scared, and more emotions!
                </div>
                <div class="app-features">
                    <span class="feature-tag" style="background: #fce4ec; border-color: #e91e63; color: #e91e63;">12 Emotions</span>
                    <span class="feature-tag" style="background: #fce4ec; border-color: #e91e63; color: #e91e63;">Big Icons</span>
                    <span class="feature-tag" style="background: #fce4ec; border-color: #e91e63; color: #e91e63;">Voice Support</span>
                </div>
            </div>

            <div class="app-card" onclick="window.location.href='first-then-board.html'" style="cursor: pointer; border-color: #3f51b5;">
                <span class="app-icon">üìã</span>
                <div class="app-title">First-Then Board</div>
                <div class="app-description">
                    See what happens first, then what comes next! Drag activities to create your plan.
                </div>
                <div class="app-features">
                    <span class="feature-tag" style="background: #e8eaf6; border-color: #3f51b5; color: #3f51b5;">Visual Plan</span>
                    <span class="feature-tag" style="background: #e8eaf6; border-color: #3f51b5; color: #3f51b5;">Drag & Drop</span>
                    <span class="feature-tag" style="background: #e8eaf6; border-color: #3f51b5; color: #3f51b5;">24 Activities</span>
                </div>
            </div>

            <div class="app-card" onclick="window.location.href='yes-no-cards.html'" style="cursor: pointer; border-color: #5e72e4;">
                <span class="app-icon">‚úÖ</span>
                <div class="app-title">Yes or No</div>
                <div class="app-description">
                    Simple binary choices! Large YES and NO buttons make it easy to communicate your decision.
                </div>
                <div class="app-features">
                    <span class="feature-tag" style="background: #eef2ff; border-color: #5e72e4; color: #5e72e4;">Big Buttons</span>
                    <span class="feature-tag" style="background: #eef2ff; border-color: #5e72e4; color: #5e72e4;">Voice Output</span>
                    <span class="feature-tag" style="background: #eef2ff; border-color: #5e72e4; color: #5e72e4;">Easy Choice</span>
                </div>
            </div>

            <div class="app-card" onclick="window.location.href='token-board.html'" style="cursor: pointer; border-color: #ff9800;">
                <span class="app-icon">üåü</span>
                <div class="app-title">Token Board</div>
                <div class="app-description">
                    Earn tokens for completing tasks and get rewards! Visual motivation system proven to work.
                </div>
                <div class="app-features">
                    <span class="feature-tag" style="background: #fff3e0; border-color: #ff9800; color: #ff9800;">Earn Tokens</span>
                    <span class="feature-tag" style="background: #fff3e0; border-color: #ff9800; color: #ff9800;">Set Goals</span>
                    <span class="feature-tag" style="background: #fff3e0; border-color: #ff9800; color: #ff9800;">Get Rewards</span>
                </div>
            </div>

            <div class="app-card" onclick="window.location.href='calm-corner.html'" style="cursor: pointer; border-color: #00acc1;">
                <span class="app-icon">üßò</span>
                <div class="app-title">Calm Down Corner</div>
                <div class="app-description">
                    Tools to feel better! Deep breathing, counting, zones of regulation, and calming activities.
                </div>
                <div class="app-features">
                    <span class="feature-tag" style="background: #e0f7fa; border-color: #00acc1; color: #00acc1;">6 Strategies</span>
                    <span class="feature-tag" style="background: #e0f7fa; border-color: #00acc1; color: #00acc1;">Self-Regulation</span>
                    <span class="feature-tag" style="background: #e0f7fa; border-color: #00acc1; color: #00acc1;">Feel Better</span>
                </div>
            </div>
        </div>
    </div>

    <!-- App Containers -->
    <div id="choiceBoardContainer" class="app-container">
        <div id="choiceBoardContent"></div>
    </div>

    <div id="soundExplorerContainer" class="app-container">
        <div id="soundExplorerContent"></div>
    </div>

    <div id="visualScheduleContainer" class="app-container">
        <div id="visualScheduleContent"></div>
    </div>

    <div id="gamesContainer" class="app-container">
        <div id="gamesContent"></div>
    </div>

    <script>
        let sessionStats = {
            choiceBoardSessions: 0,
            soundExplorerSessions: 0,
            visualScheduleSessions: 0,
            totalSessions: 0
        };

        // Initialize the integrated app
        function init() {
            updateStats();
            createFloatingParticles();
            setTimeout(addNumberCountAnimation, 2000);
        }

        // Create floating background particles
        function createFloatingParticles() {
            const particlesContainer = document.getElementById('floatingParticles');
            const particles = ['‚ú®', '‚≠ê', 'üåü', 'üí´', 'üéµ', 'üé®', 'üìö', 'üéÆ', 'üåô', '‚òÄÔ∏è'];
            
            for (let i = 0; i < 8; i++) {
                setTimeout(() => {
                    const particle = document.createElement('div');
                    particle.className = 'particle';
                    particle.textContent = particles[Math.floor(Math.random() * particles.length)];
                    particle.style.left = Math.random() * 100 + '%';
                    particle.style.animationDelay = Math.random() * 15 + 's';
                    particle.style.animationDuration = (15 + Math.random() * 10) + 's';
                    particlesContainer.appendChild(particle);
                    
                    // Remove and recreate particle when animation ends
                    particle.addEventListener('animationend', () => {
                        if (particle.parentNode) {
                            particle.parentNode.removeChild(particle);
                        }
                        // Create a new particle
                        setTimeout(() => {
                            if (document.getElementById('mainMenu').style.display !== 'none') {
                                createSingleParticle();
                            }
                        }, Math.random() * 5000);
                    });
                }, i * 2000);
            }
        }

        function createSingleParticle() {
            const particlesContainer = document.getElementById('floatingParticles');
            if (!particlesContainer) return;
            
            const particles = ['‚ú®', '‚≠ê', 'üåü', 'üí´', 'üéµ', 'üé®', 'üìö', 'üéÆ', 'üåô', '‚òÄÔ∏è'];
            const particle = document.createElement('div');
            particle.className = 'particle';
            particle.textContent = particles[Math.floor(Math.random() * particles.length)];
            particle.style.left = Math.random() * 100 + '%';
            particle.style.animationDuration = (15 + Math.random() * 10) + 's';
            particlesContainer.appendChild(particle);
            
            particle.addEventListener('animationend', () => {
                if (particle.parentNode) {
                    particle.parentNode.removeChild(particle);
                }
                setTimeout(() => {
                    if (document.getElementById('mainMenu').style.display !== 'none') {
                        createSingleParticle();
                    }
                }, Math.random() * 5000);
            });
        }

        // Add number counting animation to stats
        function addNumberCountAnimation() {
            const numbers = document.querySelectorAll('.stat-number');
            numbers.forEach((number, index) => {
                const finalValue = parseInt(number.textContent);
                let currentValue = 0;
                const increment = Math.ceil(finalValue / 20);
                const timer = setInterval(() => {
                    currentValue += increment;
                    if (currentValue >= finalValue) {
                        currentValue = finalValue;
                        clearInterval(timer);
                        // Add a little celebration when counting is done
                        number.style.animation = 'bounce 0.5s ease';
                    }
                    number.textContent = currentValue;
                }, 50);
            });
        }

        function updateStats() {
            document.getElementById('sessionsToday').textContent = sessionStats.totalSessions;
        }

        function openApp(appName) {
            console.log('Opening app:', appName); // Debug log
            
            const mainMenu = document.getElementById('mainMenu');
            const backButton = document.getElementById('backButton');
            
            if (!mainMenu || !backButton) {
                console.error('Missing elements:', { mainMenu, backButton });
                return;
            }
            
            // Hide main menu
            mainMenu.style.display = 'none';
            backButton.style.display = 'block';
            
            // Show selected app
            const containers = document.querySelectorAll('.app-container');
            containers.forEach(container => container.classList.remove('active'));
            
            const selectedContainer = document.getElementById(appName + 'Container');
            if (!selectedContainer) {
                console.error('Container not found:', appName + 'Container');
                return;
            }
            
            selectedContainer.classList.add('active');
            
            // Update session stats
            sessionStats.totalSessions++;
            updateStats();
            
            // Load app content
            if (appName === 'choiceBoard') {
                sessionStats.choiceBoardSessions++;
                loadChoiceBoard();
            } else if (appName === 'soundExplorer') {
                sessionStats.soundExplorerSessions++;
                loadSoundExplorer();
            } else if (appName === 'visualSchedule') {
                sessionStats.visualScheduleSessions++;
                loadVisualSchedule();
            } else if (appName === 'games') {
                sessionStats.gamesSessions = (sessionStats.gamesSessions || 0) + 1;
                loadGames();
            }
            
            console.log('App loaded successfully:', appName); // Debug log
        }

        function loadChoiceBoard() {
            document.getElementById('choiceBoardContent').innerHTML = `
                <div style="padding: 20px; background: linear-gradient(135deg, #e3f2fd 0%, #bbdefb 100%); min-height: 100vh;">
                    <div style="text-align: center; margin-bottom: 30px; color: #1976d2;">
                        <h1 style="font-size: 2.5em; font-weight: bold; margin-bottom: 10px;">üåü Choice Board üåü</h1>
                        <p>Choose what you want!</p>
                    </div>
                    
                    <div id="categoryTabs" style="display: flex; gap: 8px; margin-bottom: 30px; flex-wrap: wrap; justify-content: center;">
                        <button class="tab-button active" data-category="needs" onclick="switchCategory('needs')">I Need</button>
                        <button class="tab-button" data-category="feelings" onclick="switchCategory('feelings')">I Feel</button>
                        <button class="tab-button" data-category="activities" onclick="switchCategory('activities')">I Want To</button>
                        <button class="tab-button" data-category="communication" onclick="switchCategory('communication')">Talk</button>
                        <button class="tab-button" data-category="people" onclick="switchCategory('people')">People</button>
                        <button class="tab-button" data-category="places" onclick="switchCategory('places')">Places</button>
                        <button class="tab-button" data-category="sensory" onclick="switchCategory('sensory')">How I Like It</button>
                    </div>
                    
                    <div id="choiceGrid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; max-width: 800px; margin: 0 auto;">
                        <!-- Choices will be populated -->
                    </div>
                    
                    <div id="feedbackArea" style="margin-top: 30px; min-height: 60px; display: flex; align-items: center; justify-content: center;">
                        <p style="color: #666; font-size: 1.1em;">üëÜ Tap a card to make your choice</p>
                    </div>
                </div>
            `;
            
            // Initialize choice board
            window.currentCategory = 'needs';
            renderChoices('needs');
        }

        // Choice board data and functions
        const choiceCategories = {
            needs: [
                { id: 'hungry', icon: 'üçé', text: 'Hungry', subtext: 'I want food' },
                { id: 'thirsty', icon: 'üíß', text: 'Thirsty', subtext: 'I want drink' },
                { id: 'bathroom', icon: 'üöΩ', text: 'Bathroom', subtext: 'I need to go' },
                { id: 'tired', icon: 'üò¥', text: 'Tired', subtext: 'I want rest' },
                { id: 'help', icon: 'ü§ù', text: 'Help', subtext: 'I need help' },
                { id: 'break', icon: '‚è∏Ô∏è', text: 'Break', subtext: 'I need space' },
                { id: 'medicine', icon: 'üíä', text: 'Medicine', subtext: 'I need medicine' },
                { id: 'bandaid', icon: 'ü©π', text: 'Band-Aid', subtext: 'I have an owie' },
                { id: 'tissue', icon: 'ü§ß', text: 'Tissue', subtext: 'I need tissues' },
                { id: 'blanket', icon: 'üõå', text: 'Blanket', subtext: 'I want my blanket' },
                { id: 'change', icon: 'üîÑ', text: 'Change', subtext: 'I need to change' },
                { id: 'quiet', icon: 'ü§´', text: 'Quiet', subtext: 'I need quiet' }
            ],
            feelings: [
                { id: 'happy', icon: 'üòä', text: 'Happy', subtext: 'I feel good' },
                { id: 'sad', icon: 'üò¢', text: 'Sad', subtext: 'I feel sad' },
                { id: 'angry', icon: 'üò†', text: 'Angry', subtext: 'I feel mad' },
                { id: 'scared', icon: 'üò∞', text: 'Scared', subtext: 'I feel scared' },
                { id: 'excited', icon: 'ü§©', text: 'Excited', subtext: 'I feel excited' },
                { id: 'calm', icon: 'üòå', text: 'Calm', subtext: 'I feel peaceful' },
                { id: 'worried', icon: 'üòü', text: 'Worried', subtext: 'I feel worried' },
                { id: 'frustrated', icon: 'üò§', text: 'Frustrated', subtext: 'I feel stuck' },
                { id: 'proud', icon: 'üòå', text: 'Proud', subtext: 'I did good' },
                { id: 'silly', icon: 'ü§™', text: 'Silly', subtext: 'I feel silly' },
                { id: 'confused', icon: 'üòï', text: 'Confused', subtext: 'I don\'t understand' },
                { id: 'surprised', icon: 'üò≤', text: 'Surprised', subtext: 'I feel surprised' },
                { id: 'hurt', icon: 'ü§ï', text: 'Hurt', subtext: 'Something hurts' },
                { id: 'lonely', icon: 'üòî', text: 'Lonely', subtext: 'I feel alone' }
            ],
            activities: [
                { id: 'play', icon: 'üéÆ', text: 'Play', subtext: 'I want to play' },
                { id: 'read', icon: 'üìö', text: 'Read', subtext: 'I want books' },
                { id: 'outside', icon: 'üå≥', text: 'Outside', subtext: 'I want fresh air' },
                { id: 'music', icon: 'üéµ', text: 'Music', subtext: 'I want music' },
                { id: 'draw', icon: 'üé®', text: 'Draw', subtext: 'I want to create' },
                { id: 'hug', icon: 'ü§ó', text: 'Hug', subtext: 'I want comfort' },
                { id: 'watch', icon: 'üì∫', text: 'Watch TV', subtext: 'I want to watch' },
                { id: 'swim', icon: 'üèä', text: 'Swim', subtext: 'I want to swim' },
                { id: 'jump', icon: 'ü¶ò', text: 'Jump', subtext: 'I want to jump' },
                { id: 'dance', icon: 'üíÉ', text: 'Dance', subtext: 'I want to dance' },
                { id: 'build', icon: 'üß±', text: 'Build', subtext: 'I want to build' },
                { id: 'puzzle', icon: 'üß©', text: 'Puzzle', subtext: 'I want puzzles' },
                { id: 'cook', icon: 'üë®‚Äçüç≥', text: 'Cook', subtext: 'I want to cook' },
                { id: 'clean', icon: 'üßΩ', text: 'Clean', subtext: 'I want to help clean' }
            ],
            communication: [
                { id: 'yes', icon: '‚úÖ', text: 'Yes', subtext: 'I agree' },
                { id: 'no', icon: '‚ùå', text: 'No', subtext: 'I don\'t want to' },
                { id: 'maybe', icon: 'ü§î', text: 'Maybe', subtext: 'I\'m not sure' },
                { id: 'please', icon: 'üôè', text: 'Please', subtext: 'Can you please' },
                { id: 'thank_you', icon: 'üíù', text: 'Thank You', subtext: 'I appreciate it' },
                { id: 'sorry', icon: 'üòû', text: 'Sorry', subtext: 'I\'m sorry' },
                { id: 'hello', icon: 'üëã', text: 'Hello', subtext: 'Hi there!' },
                { id: 'goodbye', icon: 'üëã', text: 'Goodbye', subtext: 'See you later!' },
                { id: 'stop', icon: 'üõë', text: 'Stop', subtext: 'Please stop' },
                { id: 'wait', icon: '‚úã', text: 'Wait', subtext: 'Wait please' },
                { id: 'more', icon: '‚ûï', text: 'More', subtext: 'I want more' },
                { id: 'all_done', icon: '‚úîÔ∏è', text: 'All Done', subtext: 'I\'m finished' }
            ],
            people: [
                { id: 'mom', icon: 'üë©', text: 'Mom', subtext: 'I want Mom' },
                { id: 'dad', icon: 'üë®', text: 'Dad', subtext: 'I want Dad' },
                { id: 'family', icon: 'üë®‚Äçüë©‚Äçüëß‚Äçüë¶', text: 'Family', subtext: 'I want family' },
                { id: 'teacher', icon: 'üë©‚Äçüè´', text: 'Teacher', subtext: 'I want teacher' },
                { id: 'friend', icon: 'üë´', text: 'Friend', subtext: 'I want friend' },
                { id: 'doctor', icon: 'üë®‚Äç‚öïÔ∏è', text: 'Doctor', subtext: 'I want doctor' },
                { id: 'therapist', icon: 'üßë‚Äç‚öïÔ∏è', text: 'Therapist', subtext: 'I want therapist' },
                { id: 'grandma', icon: 'üëµ', text: 'Grandma', subtext: 'I want Grandma' },
                { id: 'grandpa', icon: 'üë¥', text: 'Grandpa', subtext: 'I want Grandpa' },
                { id: 'sibling', icon: 'üëßüë¶', text: 'Brother/Sister', subtext: 'I want sibling' }
            ],
            places: [
                { id: 'home', icon: 'üè†', text: 'Home', subtext: 'I want to go home' },
                { id: 'school', icon: 'üè´', text: 'School', subtext: 'I want to go to school' },
                { id: 'park', icon: 'üèûÔ∏è', text: 'Park', subtext: 'I want to go to park' },
                { id: 'store', icon: 'üè™', text: 'Store', subtext: 'I want to go shopping' },
                { id: 'playground', icon: 'üõù', text: 'Playground', subtext: 'I want playground' },
                { id: 'library', icon: 'üìö', text: 'Library', subtext: 'I want library' },
                { id: 'restaurant', icon: 'üçΩÔ∏è', text: 'Restaurant', subtext: 'I want to eat out' },
                { id: 'car', icon: 'üöó', text: 'Car', subtext: 'I want to drive' },
                { id: 'outside', icon: 'üåû', text: 'Outside', subtext: 'I want to go outside' },
                { id: 'bedroom', icon: 'üõèÔ∏è', text: 'My Room', subtext: 'I want my room' }
            ],
            sensory: [
                { id: 'loud', icon: 'üîä', text: 'Loud', subtext: 'I like it loud' },
                { id: 'quiet_pref', icon: 'üîá', text: 'Quiet', subtext: 'I like it quiet' },
                { id: 'bright', icon: 'üí°', text: 'Bright', subtext: 'I like bright lights' },
                { id: 'dim', icon: 'üïØÔ∏è', text: 'Dim', subtext: 'I like dim lights' },
                { id: 'soft', icon: 'üß∏', text: 'Soft', subtext: 'I like soft things' },
                { id: 'hard', icon: 'ü™®', text: 'Firm', subtext: 'I like firm things' },
                { id: 'hot', icon: 'üî•', text: 'Warm', subtext: 'I like it warm' },
                { id: 'cold', icon: 'üßä', text: 'Cool', subtext: 'I like it cool' },
                { id: 'fast', icon: 'üí®', text: 'Fast', subtext: 'I like going fast' },
                { id: 'slow', icon: 'üêå', text: 'Slow', subtext: 'I like going slow' },
                { id: 'squeeze', icon: 'ü§ó', text: 'Squeeze', subtext: 'I like tight hugs' },
                { id: 'gentle', icon: 'ü™∂', text: 'Gentle', subtext: 'I like gentle touch' }
            ]
        };

        function switchCategory(category) {
            // Update active tab
            document.querySelectorAll('.tab-button').forEach(btn => btn.classList.remove('active'));
            document.querySelector(`[data-category="${category}"]`).classList.add('active');
            
            window.currentCategory = category;
            renderChoices(category);
        }

        function renderChoices(category) {
            const grid = document.getElementById('choiceGrid');
            if (!grid) return;
            
            const choices = choiceCategories[category] || [];
            grid.innerHTML = choices.map(choice => `
                <div class="choice-card" onclick="selectChoice('${choice.id}', '${choice.text}')">
                    <span class="choice-icon">${choice.icon}</span>
                    <div class="choice-text">${choice.text}</div>
                    <div class="choice-subtext">${choice.subtext}</div>
                </div>
            `).join('');
        }

        function selectChoice(choiceId, choiceText) {
            // Clear previous selection
            document.querySelectorAll('.choice-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // Mark current selection
            event.target.closest('.choice-card').classList.add('selected');
            
            // Show feedback
            const feedbackArea = document.getElementById('feedbackArea');
            if (feedbackArea) {
                feedbackArea.innerHTML = `
                    <div style="background: #4caf50; color: white; padding: 20px 40px; border-radius: 50px; font-size: 1.5em; font-weight: bold; animation: celebrateSelection 0.6s ease;">
                        ‚ú® ${choiceText}! ‚ú®
                    </div>
                `;
            }
            
            // Create celebration effect
            createCelebrationEffect();
            
            // Text-to-speech
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(choiceText);
                utterance.rate = 0.8;
                utterance.pitch = 1.1;
                utterance.volume = 0.8;
                speechSynthesis.speak(utterance);
            }
        }

        function createCelebrationEffect() {
            const stars = ['‚≠ê', '‚ú®', 'üåü', 'üí´'];
            for (let i = 0; i < 6; i++) {
                setTimeout(() => {
                    const star = document.createElement('div');
                    star.style.cssText = `
                        position: fixed; 
                        pointer-events: none; 
                        font-size: 2em; 
                        color: #ffd700;
                        z-index: 9999;
                        animation: starfall 1.5s ease-out forwards;
                    `;
                    star.textContent = stars[Math.floor(Math.random() * stars.length)];
                    star.style.left = Math.random() * window.innerWidth + 'px';
                    star.style.top = '10px';
                    document.body.appendChild(star);
                    
                    setTimeout(() => {
                        if (star.parentNode) {
                            star.parentNode.removeChild(star);
                        }
                    }, 1500);
                }, i * 100);
            }
        }

        function loadSoundExplorer() {
            document.getElementById('soundExplorerContent').innerHTML = `
                <div style="padding: 20px; background: linear-gradient(135deg, #f3e5f5 0%, #e1bee7 100%); min-height: 100vh; overflow-x: hidden;">
                    <div style="text-align: center; margin-bottom: 30px; color: #7b1fa2;">
                        <h1 style="font-size: 2.5em; font-weight: bold; margin-bottom: 10px;">üéµ Sound Explorer üéµ</h1>
                        <p>Touch to hear amazing sounds!</p>
                    </div>

                    <div style="display: flex; justify-content: center; gap: 10px; margin-bottom: 30px; flex-wrap: wrap;">
                        <button class="sound-mode-button active" onclick="switchSoundMode('explore')" style="padding: 12px 20px; font-size: 1em; font-weight: bold; border: 3px solid #7b1fa2; border-radius: 20px; background: #7b1fa2; color: white; cursor: pointer; transition: all 0.3s ease; min-width: 100px;">Free Explore</button>
                        <button class="sound-mode-button" onclick="switchSoundMode('matching')" style="padding: 12px 20px; font-size: 1em; font-weight: bold; border: 3px solid #7b1fa2; border-radius: 20px; background: white; color: #7b1fa2; cursor: pointer; transition: all 0.3s ease; min-width: 100px;">Sound Matching</button>
                        <button class="sound-mode-button" onclick="switchSoundMode('record')" style="padding: 12px 20px; font-size: 1em; font-weight: bold; border: 3px solid #7b1fa2; border-radius: 20px; background: white; color: #7b1fa2; cursor: pointer; transition: all 0.3s ease; min-width: 100px;">My Sounds</button>
                    </div>

                    <div id="soundCategorySelector" style="display: flex; justify-content: center; gap: 8px; margin-bottom: 25px; flex-wrap: wrap;">
                        <button class="sound-category-button active" onclick="selectSoundCategory('all')" style="padding: 10px 15px; font-size: 0.9em; font-weight: bold; border: 2px solid #9c27b0; border-radius: 15px; background: #9c27b0; color: white; cursor: pointer; transition: all 0.3s ease; min-width: 80px;">All Sounds</button>
                        <button class="sound-category-button" onclick="selectSoundCategory('animals')" style="padding: 10px 15px; font-size: 0.9em; font-weight: bold; border: 2px solid #9c27b0; border-radius: 15px; background: white; color: #9c27b0; cursor: pointer; transition: all 0.3s ease; min-width: 80px;">Animals</button>
                        <button class="sound-category-button" onclick="selectSoundCategory('vehicles')" style="padding: 10px 15px; font-size: 0.9em; font-weight: bold; border: 2px solid #9c27b0; border-radius: 15px; background: white; color: #9c27b0; cursor: pointer; transition: all 0.3s ease; min-width: 80px;">Vehicles</button>
                        <button class="sound-category-button" onclick="selectSoundCategory('instruments')" style="padding: 10px 15px; font-size: 0.9em; font-weight: bold; border: 2px solid #9c27b0; border-radius: 15px; background: white; color: #9c27b0; cursor: pointer; transition: all 0.3s ease; min-width: 80px;">Music</button>
                        <button class="sound-category-button" onclick="selectSoundCategory('nature')" style="padding: 10px 15px; font-size: 0.9em; font-weight: bold; border: 2px solid #9c27b0; border-radius: 15px; background: white; color: #9c27b0; cursor: pointer; transition: all 0.3s ease; min-width: 80px;">Nature</button>
                        <button class="sound-category-button" onclick="selectSoundCategory('household')" style="padding: 10px 15px; font-size: 0.9em; font-weight: bold; border: 2px solid #9c27b0; border-radius: 15px; background: white; color: #9c27b0; cursor: pointer; transition: all 0.3s ease; min-width: 80px;">Home</button>
                        <button class="sound-category-button" onclick="selectSoundCategory('body_sounds')" style="padding: 10px 15px; font-size: 0.9em; font-weight: bold; border: 2px solid #9c27b0; border-radius: 15px; background: white; color: #9c27b0; cursor: pointer; transition: all 0.3s ease; min-width: 80px;">Body Sounds</button>
                    </div>

                    <div id="soundGrid" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(180px, 1fr)); gap: 20px; max-width: 900px; margin: 0 auto; padding: 0 20px;">
                        <!-- Sound cards will be populated -->
                    </div>

                    <div id="soundMatchingGame" style="display: none; max-width: 600px; margin: 0 auto; padding: 20px;">
                        <div style="background: white; padding: 30px; border-radius: 20px; text-align: center; margin-bottom: 30px; box-shadow: 0 5px 15px rgba(0,0,0,0.1);">
                            <div style="font-size: 1.5em; color: #7b1fa2; margin-bottom: 20px; font-weight: bold;" id="soundQuestionText">What sound does this make?</div>
                            <button onclick="playSoundQuestion()" style="background: #ff6b35; color: white; border: none; padding: 15px 30px; border-radius: 25px; font-size: 1.2em; font-weight: bold; cursor: pointer;">üîä Play Sound</button>
                        </div>
                        <div id="soundAnswerOptions" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 15px;">
                            <!-- Options populated by JS -->
                        </div>
                    </div>

                    <div style="margin-top: 30px; text-align: center; min-height: 80px; display: flex; flex-direction: column; align-items: center; justify-content: center;">
                        <div style="background: white; padding: 10px 20px; border-radius: 25px; color: #7b1fa2; font-weight: bold; border: 2px solid #7b1fa2;">
                            üåü Sounds Explored: <span id="soundCounter">0</span>
                        </div>
                    </div>
                </div>
            `;
            
            // Initialize sound explorer
            window.currentSoundMode = 'explore';
            window.currentSoundCategory = 'all';
            window.soundsExplored = new Set();
            window.currentSoundQuestion = null;
            window.soundAudioContext = null;
            
            setupSoundAudioContext();
            renderSounds();
        }

        // Sound categories data
        const soundCategories = {
            animals: [
                { id: 'cow', icon: 'üêÑ', title: 'Cow', description: 'Moo moo!', frequency: 'low', soundType: 'oscillating' },
                { id: 'cat', icon: 'üê±', title: 'Cat', description: 'Meow meow!', frequency: 'medium', soundType: 'sliding' },
                { id: 'dog', icon: 'üê∂', title: 'Dog', description: 'Woof woof!', frequency: 'medium', soundType: 'burst' },
                { id: 'bird', icon: 'üê¶', title: 'Bird', description: 'Tweet tweet!', frequency: 'high', soundType: 'chirp' },
                { id: 'lion', icon: 'ü¶Å', title: 'Lion', description: 'Roar!', frequency: 'low', soundType: 'growl' },
                { id: 'duck', icon: 'ü¶Ü', title: 'Duck', description: 'Quack quack!', frequency: 'medium', soundType: 'burst' },
                { id: 'elephant', icon: 'üêò', title: 'Elephant', description: 'Trumpet!', frequency: 'low', soundType: 'trumpet' },
                { id: 'horse', icon: 'üê¥', title: 'Horse', description: 'Neigh!', frequency: 'medium', soundType: 'whinny' },
                { id: 'pig', icon: 'üê∑', title: 'Pig', description: 'Oink oink!', frequency: 'medium', soundType: 'snort' },
                { id: 'sheep', icon: 'üêë', title: 'Sheep', description: 'Baa baa!', frequency: 'medium', soundType: 'bleat' },
                { id: 'frog', icon: 'üê∏', title: 'Frog', description: 'Ribbit!', frequency: 'medium', soundType: 'croak' },
                { id: 'bee', icon: 'üêù', title: 'Bee', description: 'Buzz buzz!', frequency: 'high', soundType: 'buzz' }
            ],
            vehicles: [
                { id: 'car', icon: 'üöó', title: 'Car', description: 'Vroom vroom!', frequency: 'medium', soundType: 'engine' },
                { id: 'train', icon: 'üöÇ', title: 'Train', description: 'Choo choo!', frequency: 'low', soundType: 'whistle' },
                { id: 'airplane', icon: '‚úàÔ∏è', title: 'Airplane', description: 'Whoosh!', frequency: 'high', soundType: 'jet' },
                { id: 'truck', icon: 'üöö', title: 'Truck', description: 'Beep beep!', frequency: 'low', soundType: 'horn' },
                { id: 'motorcycle', icon: 'üèçÔ∏è', title: 'Motorcycle', description: 'Vroom!', frequency: 'high', soundType: 'revving' },
                { id: 'boat', icon: '‚õµ', title: 'Boat', description: 'Splash!', frequency: 'medium', soundType: 'water' },
                { id: 'helicopter', icon: 'üöÅ', title: 'Helicopter', description: 'Whirr!', frequency: 'medium', soundType: 'chopper' },
                { id: 'bus', icon: 'üöå', title: 'Bus', description: 'Hiss!', frequency: 'low', soundType: 'brake' },
                { id: 'fire_truck', icon: 'üöí', title: 'Fire Truck', description: 'Wee-ooo!', frequency: 'high', soundType: 'siren' },
                { id: 'ambulance', icon: 'üöë', title: 'Ambulance', description: 'Nee-naw!', frequency: 'high', soundType: 'siren2' }
            ],
            instruments: [
                { id: 'piano', icon: 'üéπ', title: 'Piano', description: 'Ding ding!', frequency: 'medium', soundType: 'piano' },
                { id: 'guitar', icon: 'üé∏', title: 'Guitar', description: 'Strum strum!', frequency: 'medium', soundType: 'string' },
                { id: 'drums', icon: 'ü•Å', title: 'Drums', description: 'Boom boom!', frequency: 'low', soundType: 'percussion' },
                { id: 'trumpet', icon: 'üé∫', title: 'Trumpet', description: 'Toot toot!', frequency: 'high', soundType: 'brass' },
                { id: 'violin', icon: 'üéª', title: 'Violin', description: 'La la!', frequency: 'high', soundType: 'violin' },
                { id: 'bell', icon: 'üîî', title: 'Bell', description: 'Ring ring!', frequency: 'high', soundType: 'bell' },
                { id: 'xylophone', icon: 'üéµ', title: 'Xylophone', description: 'Ting ting!', frequency: 'high', soundType: 'metal' },
                { id: 'flute', icon: 'ü™à', title: 'Flute', description: 'Toot!', frequency: 'high', soundType: 'flute' }
            ],
            nature: [
                { id: 'rain', icon: 'üåßÔ∏è', title: 'Rain', description: 'Pitter patter!', frequency: 'high', soundType: 'rain' },
                { id: 'thunder', icon: '‚õàÔ∏è', title: 'Thunder', description: 'Rumble!', frequency: 'low', soundType: 'thunder' },
                { id: 'wind', icon: 'üå¨Ô∏è', title: 'Wind', description: 'Whoosh!', frequency: 'medium', soundType: 'wind' },
                { id: 'ocean', icon: 'üåä', title: 'Ocean', description: 'Crash!', frequency: 'low', soundType: 'waves' },
                { id: 'fire', icon: 'üî•', title: 'Fire', description: 'Crackle!', frequency: 'high', soundType: 'crackle' },
                { id: 'leaves', icon: 'üçÉ', title: 'Leaves', description: 'Rustle!', frequency: 'high', soundType: 'rustle' }
            ],
            household: [
                { id: 'doorbell', icon: 'üîî', title: 'Doorbell', description: 'Ding dong!', frequency: 'medium', soundType: 'doorbell' },
                { id: 'phone', icon: 'üìû', title: 'Phone', description: 'Ring ring!', frequency: 'high', soundType: 'phone' },
                { id: 'clock', icon: '‚è∞', title: 'Clock', description: 'Tick tock!', frequency: 'medium', soundType: 'tick' },
                { id: 'vacuum', icon: 'ü™£', title: 'Vacuum', description: 'Whirr!', frequency: 'low', soundType: 'motor' },
                { id: 'microwave', icon: 'üì±', title: 'Microwave', description: 'Beep!', frequency: 'high', soundType: 'beep' },
                { id: 'washing_machine', icon: 'üåÄ', title: 'Washer', description: 'Spin!', frequency: 'low', soundType: 'spin' }
            ],
            body_sounds: [
                { id: 'clap', icon: 'üëè', title: 'Clap', description: 'Clap clap!', frequency: 'medium', soundType: 'clap' },
                { id: 'stomp', icon: 'ü¶∂', title: 'Stomp', description: 'Thump thump!', frequency: 'low', soundType: 'thump' },
                { id: 'whistle', icon: 'üòó', title: 'Whistle', description: 'Whee!', frequency: 'high', soundType: 'human_whistle' },
                { id: 'snap', icon: 'ü´∞', title: 'Snap', description: 'Snap snap!', frequency: 'high', soundType: 'snap' },
                { id: 'kiss', icon: 'üòò', title: 'Kiss', description: 'Mwah!', frequency: 'medium', soundType: 'kiss' },
                { id: 'hum', icon: 'üéµ', title: 'Hum', description: 'Hmm hmm!', frequency: 'medium', soundType: 'hum' }
            ]
        };

        function setupSoundAudioContext() {
            try {
                window.soundAudioContext = new (window.AudioContext || window.webkitAudioContext)();
            } catch (e) {
                console.log('Audio context not available');
            }
        }

        function switchSoundMode(mode) {
            document.querySelectorAll('.sound-mode-button').forEach(btn => {
                btn.style.background = 'white';
                btn.style.color = '#7b1fa2';
            });
            event.target.style.background = '#7b1fa2';
            event.target.style.color = 'white';
            
            window.currentSoundMode = mode;
            
            const soundGrid = document.getElementById('soundGrid');
            const matchingGame = document.getElementById('soundMatchingGame');
            const categorySelector = document.getElementById('soundCategorySelector');
            
            if (mode === 'explore') {
                soundGrid.style.display = 'grid';
                matchingGame.style.display = 'none';
                categorySelector.style.display = 'flex';
                renderSounds();
            } else if (mode === 'matching') {
                soundGrid.style.display = 'none';
                matchingGame.style.display = 'block';
                categorySelector.style.display = 'none';
                startSoundMatchingGame();
            } else if (mode === 'record') {
                soundGrid.style.display = 'grid';
                matchingGame.style.display = 'none';
                categorySelector.style.display = 'flex';
                renderSounds();
                alert('üé§ Recording mode coming soon! For now, enjoy exploring sounds! üé§');
            }
        }

        function selectSoundCategory(category) {
            document.querySelectorAll('.sound-category-button').forEach(btn => {
                btn.style.background = 'white';
                btn.style.color = '#9c27b0';
            });
            event.target.style.background = '#9c27b0';
            event.target.style.color = 'white';
            
            window.currentSoundCategory = category;
            renderSounds();
        }

        function renderSounds() {
            const grid = document.getElementById('soundGrid');
            if (!grid) return;
            
            let soundsToShow;
            if (window.currentSoundCategory === 'all') {
                soundsToShow = [...soundCategories.animals, ...soundCategories.vehicles, 
                              ...soundCategories.instruments, ...soundCategories.nature,
                              ...soundCategories.household, ...soundCategories.body_sounds];
            } else {
                soundsToShow = soundCategories[window.currentSoundCategory] || [];
            }
            
            grid.innerHTML = soundsToShow.map(sound => `
                <div onclick="playAnimalSound('${sound.id}')" style="background: white; border-radius: 20px; padding: 25px; text-align: center; cursor: pointer; transition: all 0.4s ease; box-shadow: 0 5px 15px rgba(0,0,0,0.1); border: 3px solid transparent; min-height: 200px; display: flex; flex-direction: column; justify-content: center; align-items: center; position: relative; overflow: hidden;" onmouseover="this.style.transform='translateY(-10px) scale(1.05)'; this.style.boxShadow='0 15px 30px rgba(0,0,0,0.2)'; this.style.borderColor='#ff6b35';" onmouseout="this.style.transform='translateY(0) scale(1)'; this.style.boxShadow='0 5px 15px rgba(0,0,0,0.1)'; this.style.borderColor='transparent';">
                    <span style="font-size: 4em; margin-bottom: 15px; display: block; transition: all 0.3s ease;">${sound.icon}</span>
                    <div style="font-size: 1.3em; font-weight: bold; margin-bottom: 8px;">${sound.title}</div>
                    <div style="font-size: 0.9em; opacity: 0.8;">${sound.description}</div>
                </div>
            `).join('');
        }

        function playAnimalSound(soundId) {
            const sound = findSoundById(soundId);
            if (!sound) return;
            
            // Add to explored sounds
            window.soundsExplored.add(soundId);
            document.getElementById('soundCounter').textContent = window.soundsExplored.size;
            
            // Generate sound
            generateSynthSound(sound.frequency, sound.soundType);
            
            // Speak the sound name
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance(`${sound.title} says ${sound.description}`);
                utterance.rate = 0.8;
                utterance.pitch = 1.2;
                utterance.volume = 0.7;
                speechSynthesis.speak(utterance);
            }
            
            // Visual celebration
            createSoundCelebration();
        }

        function findSoundById(id) {
            const allSounds = [...soundCategories.animals, ...soundCategories.vehicles, 
                             ...soundCategories.instruments, ...soundCategories.nature,
                             ...soundCategories.household, ...soundCategories.body_sounds];
            return allSounds.find(sound => sound.id === id);
        }

        function generateSynthSound(frequency, soundType) {
            if (!window.soundAudioContext) return;
            
            const oscillator = window.soundAudioContext.createOscillator();
            const gainNode = window.soundAudioContext.createGain();
            
            oscillator.connect(gainNode);
            gainNode.connect(window.soundAudioContext.destination);
            
            let baseFreq;
            switch(frequency) {
                case 'low': baseFreq = 150; break;
                case 'medium': baseFreq = 300; break;
                case 'high': baseFreq = 600; break;
                default: baseFreq = 300;
            }
            
            oscillator.type = 'sine';
            oscillator.frequency.setValueAtTime(baseFreq, window.soundAudioContext.currentTime);
            
            gainNode.gain.setValueAtTime(0, window.soundAudioContext.currentTime);
            gainNode.gain.linearRampToValueAtTime(0.3, window.soundAudioContext.currentTime + 0.1);
            gainNode.gain.exponentialRampToValueAtTime(0.01, window.soundAudioContext.currentTime + 0.8);
            
            oscillator.start(window.soundAudioContext.currentTime);
            oscillator.stop(window.soundAudioContext.currentTime + 0.8);
        }

        function createSoundCelebration() {
            const stars = ['üåü', '‚ú®', '‚≠ê', 'üí´', 'üéµ', 'üé∂'];
            for (let i = 0; i < 5; i++) {
                setTimeout(() => {
                    const star = document.createElement('div');
                    star.style.cssText = `
                        position: fixed; pointer-events: none; font-size: 2.5em; z-index: 1000;
                        animation: floatUp 2s ease-out forwards;
                    `;
                    star.textContent = stars[Math.floor(Math.random() * stars.length)];
                    star.style.left = (Math.random() * window.innerWidth) + 'px';
                    star.style.top = (window.innerHeight - 100) + 'px';
                    document.body.appendChild(star);
                    
                    setTimeout(() => {
                        if (star.parentNode) {
                            star.parentNode.removeChild(star);
                        }
                    }, 2000);
                }, i * 150);
            }
        }

        function startSoundMatchingGame() {
            const allSounds = [...soundCategories.animals, ...soundCategories.vehicles, 
                             ...soundCategories.instruments, ...soundCategories.nature,
                             ...soundCategories.household, ...soundCategories.body_sounds];
            window.currentSoundQuestion = allSounds[Math.floor(Math.random() * allSounds.length)];
            
            document.getElementById('soundQuestionText').textContent = 'What sound does this make?';
            
            const options = [window.currentSoundQuestion];
            while (options.length < 4) {
                const randomSound = allSounds[Math.floor(Math.random() * allSounds.length)];
                if (!options.includes(randomSound)) {
                    options.push(randomSound);
                }
            }
            
            // Shuffle options
            for (let i = options.length - 1; i > 0; i--) {
                const j = Math.floor(Math.random() * (i + 1));
                [options[i], options[j]] = [options[j], options[i]];
            }
            
            document.getElementById('soundAnswerOptions').innerHTML = options.map(option => `
                <div onclick="checkSoundAnswer('${option.id}')" style="background: white; padding: 20px; border-radius: 15px; text-align: center; cursor: pointer; border: 3px solid transparent; transition: all 0.3s ease;" onmouseover="this.style.transform='scale(1.05)'; this.style.borderColor='#7b1fa2';" onmouseout="this.style.transform='scale(1)'; this.style.borderColor='transparent';">
                    <div style="font-size: 2.5em; margin-bottom: 10px;">${option.icon}</div>
                    <div style="font-weight: bold;">${option.title}</div>
                </div>
            `).join('');
        }

        function playSoundQuestion() {
            if (window.currentSoundQuestion) {
                playAnimalSound(window.currentSoundQuestion.id);
            }
        }

        function checkSoundAnswer(answerId) {
            const correct = answerId === window.currentSoundQuestion.id;
            const card = event.target.closest('div');
            
            if (correct) {
                card.style.background = '#c8e6c9';
                card.style.borderColor = '#4caf50';
                card.style.transform = 'scale(1.1)';
                
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance('üéâ Correct! Great job! üéâ');
                    speechSynthesis.speak(utterance);
                }
                
                setTimeout(() => {
                    startSoundMatchingGame();
                }, 2000);
            } else {
                card.style.background = '#ffcdd2';
                setTimeout(() => {
                    card.style.background = 'white';
                }, 500);
                
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance('Try again!');
                    speechSynthesis.speak(utterance);
                }
            }
        }

        function loadVisualSchedule() {
            document.getElementById('visualScheduleContent').innerHTML = `
                <div style="padding: 20px; background: linear-gradient(135deg, #e8f5e8 0%, #c8e6c9 100%); min-height: 100vh;">
                    <div style="text-align: center; margin-bottom: 30px; color: #2e7d32;">
                        <h1 style="font-size: 2.5em; font-weight: bold; margin-bottom: 10px;">üìÖ My Daily Schedule üìÖ</h1>
                        <p>Drag activities to build your day!</p>
                    </div>

                    <div style="display: flex; gap: 30px; max-width: 1200px; margin: 0 auto; flex-wrap: wrap;">
                        <!-- Activity Bank -->
                        <div style="flex: 1; min-width: 300px; background: white; border-radius: 20px; padding: 20px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); border: 3px solid #4caf50;">
                            <div style="text-align: center; margin-bottom: 20px; color: #2e7d32; font-size: 1.3em; font-weight: bold;">üì¶ Activity Bank</div>
                            <div id="scheduleActivityBank" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(120px, 1fr)); gap: 15px;">
                                <!-- Activities populated by JS -->
                            </div>
                        </div>

                        <!-- Schedule Area -->
                        <div style="flex: 2; min-width: 400px;">
                            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
                                <div style="color: #2e7d32; font-size: 1.5em; font-weight: bold;">Today's Schedule</div>
                                <div style="display: flex; gap: 10px;">
                                    <button onclick="clearSchedule()" style="padding: 10px 15px; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; background: #ff5722; color: white; transition: all 0.3s ease;" onmouseover="this.style.background='#e64a19'; this.style.transform='scale(1.05)';" onmouseout="this.style.background='#ff5722'; this.style.transform='scale(1)';">üóëÔ∏è Clear</button>
                                    <button onclick="reviewSchedule()" style="padding: 10px 15px; border: none; border-radius: 10px; font-weight: bold; cursor: pointer; background: #2196f3; color: white; transition: all 0.3s ease;" onmouseover="this.style.background='#1976d2'; this.style.transform='scale(1.05)';" onmouseout="this.style.background='#2196f3'; this.style.transform='scale(1)';">‚ñ∂Ô∏è Review</button>
                                </div>
                            </div>
                            
                            <div id="scheduleTimeline" style="background: white; border-radius: 20px; padding: 20px; min-height: 400px; box-shadow: 0 5px 15px rgba(0,0,0,0.1); border: 3px solid #4caf50;">
                                <!-- Timeline populated by JS -->
                            </div>

                            <div style="margin-top: 20px; text-align: center;">
                                <div>Progress: <span id="scheduleCompletedCount">0</span> of <span id="scheduleTotalCount">0</span> activities completed!</div>
                                <div style="background: #e0e0e0; height: 20px; border-radius: 10px; overflow: hidden; margin: 10px 0;">
                                    <div id="scheduleProgressFill" style="background: linear-gradient(90deg, #4caf50, #81c784); height: 100%; width: 0%; transition: width 0.5s ease; display: flex; align-items: center; justify-content: center; color: white; font-weight: bold; font-size: 0.8em;">0%</div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- Celebration Overlay -->
                    <div id="scheduleCelebrationOverlay" style="position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(76,175,80,0.9); display: none; align-items: center; justify-content: center; z-index: 1000;">
                        <div style="background: white; padding: 40px; border-radius: 20px; text-align: center;">
                            <h2>üéâ Amazing Job! üéâ</h2>
                            <p>You completed all your activities today!</p>
                            <button onclick="hideScheduleCelebration()" style="background: #2196f3; color: white; border: none; padding: 15px 30px; border-radius: 15px; font-weight: bold; margin-top: 15px; cursor: pointer;">Awesome!</button>
                        </div>
                    </div>
                </div>
            `;
            
            // Initialize schedule
            window.scheduleData = {};
            window.completedScheduleActivities = new Set();
            
            renderScheduleActivityBank();
            renderScheduleTimeline();
            updateScheduleProgress();
            setupScheduleDragAndDrop();
        }

        // Schedule activities data
        const scheduleActivities = [
            { id: 'wake_up', icon: 'üåÖ', title: 'Wake Up', sound: 'Good morning!' },
            { id: 'brush_teeth', icon: 'ü¶∑', title: 'Brush Teeth', sound: 'Time to brush teeth!' },
            { id: 'breakfast', icon: 'ü•û', title: 'Breakfast', sound: 'Time to eat breakfast!' },
            { id: 'get_dressed', icon: 'üëï', title: 'Get Dressed', sound: 'Time to get dressed!' },
            { id: 'school', icon: 'üè´', title: 'School', sound: 'Time for school!' },
            { id: 'lunch', icon: 'ü•™', title: 'Lunch', sound: 'Time for lunch!' },
            { id: 'play', icon: 'üéÆ', title: 'Play Time', sound: 'Time to play!' },
            { id: 'snack', icon: 'üçé', title: 'Snack', sound: 'Time for a snack!' },
            { id: 'homework', icon: 'üìö', title: 'Homework', sound: 'Time for homework!' },
            { id: 'dinner', icon: 'üçΩÔ∏è', title: 'Dinner', sound: 'Time for dinner!' },
            { id: 'bath', icon: 'üõÅ', title: 'Bath Time', sound: 'Time for a bath!' },
            { id: 'bedtime', icon: 'üåô', title: 'Bedtime', sound: 'Time for bed!' },
            { id: 'read', icon: 'üìñ', title: 'Reading', sound: 'Time to read!' },
            { id: 'exercise', icon: 'üèÉ', title: 'Exercise', sound: 'Time to exercise!' },
            { id: 'clean', icon: 'üßπ', title: 'Clean Up', sound: 'Time to clean up!' },
            { id: 'music', icon: 'üéµ', title: 'Music Time', sound: 'Time for music!' },
            { id: 'outside', icon: 'üå≥', title: 'Outside Time', sound: 'Time to go outside!' },
            { id: 'art', icon: 'üé®', title: 'Art Time', sound: 'Time for art!' },
            { id: 'tv', icon: 'üì∫', title: 'TV Time', sound: 'Time to watch TV!' },
            { id: 'nap', icon: 'üò¥', title: 'Nap Time', sound: 'Time for a nap!' }
        ];

        const scheduleTimeSlots = [
            '7:00 AM', '8:00 AM', '9:00 AM', '10:00 AM', '11:00 AM', '12:00 PM',
            '1:00 PM', '2:00 PM', '3:00 PM', '4:00 PM', '5:00 PM', '6:00 PM',
            '7:00 PM', '8:00 PM'
        ];

        function renderScheduleActivityBank() {
            const bank = document.getElementById('scheduleActivityBank');
            if (!bank) return;
            
            bank.innerHTML = scheduleActivities.map(activity => `
                <div draggable="true" data-activity="${activity.id}" style="background: #f1f8e9; border-radius: 15px; padding: 15px; text-align: center; cursor: grab; transition: all 0.3s ease; border: 2px solid #81c784; min-height: 120px; display: flex; flex-direction: column; justify-content: center; align-items: center;" onmouseover="this.style.transform='scale(1.05)'; this.style.boxShadow='0 5px 15px rgba(0,0,0,0.2)'; this.style.borderColor='#4caf50';" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='none'; this.style.borderColor='#81c784';">
                    <span style="font-size: 2.5em; margin-bottom: 8px; display: block;">${activity.icon}</span>
                    <div style="font-size: 0.9em; font-weight: bold; color: #2e7d32;">${activity.title}</div>
                </div>
            `).join('');
        }

        function renderScheduleTimeline() {
            const timeline = document.getElementById('scheduleTimeline');
            if (!timeline) return;
            
            timeline.innerHTML = scheduleTimeSlots.map((time, index) => {
                const activity = window.scheduleData[index];
                const isCompleted = window.completedScheduleActivities.has(index);
                
                return `
                    <div data-slot="${index}" style="display: flex; align-items: center; margin-bottom: 15px; padding: 15px; background: ${activity ? '#c8e6c9' : '#f8f9fa'}; border-radius: 15px; border: 3px ${activity ? 'solid' : 'dashed'} ${activity ? '#4caf50' : '#81c784'}; min-height: 100px; transition: all 0.3s ease; position: relative;" ondragover="event.preventDefault(); this.style.backgroundColor='#e8f5e8'; this.style.borderColor='#4caf50'; this.style.borderStyle='solid'; this.style.borderWidth='4px'; this.style.transform='scale(1.02)'; this.style.boxShadow='0 8px 25px rgba(76,175,80,0.3)';" ondragleave="this.style.backgroundColor='${activity ? '#c8e6c9' : '#f8f9fa'}'; this.style.borderColor='${activity ? '#4caf50' : '#81c784'}'; this.style.borderStyle='${activity ? 'solid' : 'dashed'}'; this.style.borderWidth='3px'; this.style.transform='scale(1)'; this.style.boxShadow='none';" ondrop="dropScheduleActivity(event, ${index})">
                        ${!activity ? `<div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: #81c784; font-weight: bold; font-size: 1.1em; opacity: 0.7; pointer-events: none; z-index: 1;">Drop activity here</div>` : ''}
                        <div style="background: #4caf50; color: white; padding: 8px 15px; border-radius: 20px; font-weight: bold; margin-right: 15px; min-width: 80px; text-align: center;">${time}</div>
                        <div style="flex: 1; display: flex; align-items: center; gap: 10px;">
                            ${activity ? `
                                <div onclick="toggleScheduleCompletion(${index})" style="background: white; padding: 15px; border-radius: 15px; display: flex; align-items: center; gap: 15px; box-shadow: 0 3px 10px rgba(0,0,0,0.1); border: 2px solid #4caf50; cursor: pointer; transition: all 0.3s ease; flex: 1; ${isCompleted ? 'opacity: 0.6; background: #e8f5e8; border-color: #81c784;' : ''}" onmouseover="this.style.transform='scale(1.02)'; this.style.boxShadow='0 5px 15px rgba(0,0,0,0.2)';" onmouseout="this.style.transform='scale(1)'; this.style.boxShadow='0 3px 10px rgba(0,0,0,0.1)';">
                                    <span style="font-size: 2em; ${isCompleted ? 'filter: grayscale(50%);' : ''}">${activity.icon}</span>
                                    <div style="font-size: 1.1em; color: #2e7d32; font-weight: bold;">${activity.title}</div>
                                    <div style="margin-left: auto;">
                                        <button onclick="event.stopPropagation(); toggleScheduleCompletion(${index})" style="background: ${isCompleted ? '#81c784' : '#4caf50'}; color: white; border: none; width: 30px; height: 30px; border-radius: 50%; cursor: pointer; font-size: 1.2em; display: flex; align-items: center; justify-content: center; transition: all 0.3s ease;" onmouseover="this.style.transform='scale(1.1)';" onmouseout="this.style.transform='scale(1)';">
                                            ${isCompleted ? '‚úì' : '‚óã'}
                                        </button>
                                    </div>
                                </div>
                            ` : ''}
                        </div>
                    </div>
                `;
            }).join('');
        }

        function setupScheduleDragAndDrop() {
            const activityCards = document.querySelectorAll('[data-activity]');
            
            activityCards.forEach(card => {
                card.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', card.dataset.activity);
                    card.style.opacity = '0.5';
                    card.style.transform = 'rotate(5deg)';
                });

                card.addEventListener('dragend', (e) => {
                    card.style.opacity = '1';
                    card.style.transform = 'rotate(0deg)';
                });
            });
        }

        function dropScheduleActivity(e, slotIndex) {
            e.preventDefault();
            const activityId = e.dataTransfer.getData('text/plain');
            const activity = scheduleActivities.find(a => a.id === activityId);
            
            if (activity) {
                window.scheduleData[slotIndex] = activity;
                renderScheduleTimeline();
                updateScheduleProgress();
                setupScheduleDragAndDrop();
                
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(`Added ${activity.title} to ${scheduleTimeSlots[slotIndex]}`);
                    speechSynthesis.speak(utterance);
                }
            }
            
            // Reset drag-over styling
            const slot = e.currentTarget;
            slot.style.backgroundColor = window.scheduleData[slotIndex] ? '#c8e6c9' : '#f8f9fa';
            slot.style.borderColor = window.scheduleData[slotIndex] ? '#4caf50' : '#81c784';
            slot.style.borderStyle = window.scheduleData[slotIndex] ? 'solid' : 'dashed';
            slot.style.borderWidth = '3px';
            slot.style.transform = 'scale(1)';
            slot.style.boxShadow = 'none';
        }

        function toggleScheduleCompletion(slotIndex) {
            if (window.completedScheduleActivities.has(slotIndex)) {
                window.completedScheduleActivities.delete(slotIndex);
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance('Activity unchecked');
                    speechSynthesis.speak(utterance);
                }
            } else {
                window.completedScheduleActivities.add(slotIndex);
                const activity = window.scheduleData[slotIndex];
                if (activity && 'speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance(`Great job completing ${activity.title}!`);
                    speechSynthesis.speak(utterance);
                }
                createScheduleCelebrationEffect();
            }
            
            renderScheduleTimeline();
            setupScheduleDragAndDrop();
            updateScheduleProgress();
            
            // Check if all activities are completed
            const scheduledCount = Object.keys(window.scheduleData).length;
            if (scheduledCount > 0 && window.completedScheduleActivities.size === scheduledCount) {
                showFullScheduleCelebration();
            }
        }

        function updateScheduleProgress() {
            const scheduledCount = Object.keys(window.scheduleData).length;
            const completedCount = window.completedScheduleActivities.size;
            const percentage = scheduledCount > 0 ? Math.round((completedCount / scheduledCount) * 100) : 0;

            const totalCountEl = document.getElementById('scheduleTotalCount');
            const completedCountEl = document.getElementById('scheduleCompletedCount');
            const progressFillEl = document.getElementById('scheduleProgressFill');
            
            if (totalCountEl) totalCountEl.textContent = scheduledCount;
            if (completedCountEl) completedCountEl.textContent = completedCount;
            if (progressFillEl) {
                progressFillEl.style.width = percentage + '%';
                progressFillEl.textContent = percentage + '%';
            }
        }

        function clearSchedule() {
            window.scheduleData = {};
            window.completedScheduleActivities.clear();
            renderScheduleTimeline();
            setupScheduleDragAndDrop();
            updateScheduleProgress();
            
            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance('Schedule cleared');
                speechSynthesis.speak(utterance);
            }
        }

        function reviewSchedule() {
            const scheduledItems = Object.entries(window.scheduleData);
            if (scheduledItems.length === 0) {
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance('Your schedule is empty. Add some activities first!');
                    speechSynthesis.speak(utterance);
                }
                return;
            }

            if ('speechSynthesis' in window) {
                const utterance = new SpeechSynthesisUtterance('Here is your schedule for today:');
                speechSynthesis.speak(utterance);
                
                scheduledItems.forEach(([slotIndex, activity], index) => {
                    const timeSlot = scheduleTimeSlots[parseInt(slotIndex)];
                    setTimeout(() => {
                        const utterance2 = new SpeechSynthesisUtterance(`At ${timeSlot}, ${activity.sound}`);
                        speechSynthesis.speak(utterance2);
                    }, (index + 1) * 2000);
                });
            }
        }

        function createScheduleCelebrationEffect() {
            const stars = ['‚≠ê', '‚ú®', 'üåü', 'üí´', 'üéâ'];
            for (let i = 0; i < 4; i++) {
                setTimeout(() => {
                    const star = document.createElement('div');
                    star.style.cssText = `
                        position: fixed; pointer-events: none; font-size: 3em; z-index: 999;
                        animation: floatUp 3s ease-out forwards;
                    `;
                    star.textContent = stars[Math.floor(Math.random() * stars.length)];
                    star.style.left = Math.random() * window.innerWidth + 'px';
                    star.style.top = (window.innerHeight - 100) + 'px';
                    document.body.appendChild(star);
                    
                    setTimeout(() => {
                        if (star.parentNode) {
                            star.parentNode.removeChild(star);
                        }
                    }, 3000);
                }, i * 200);
            }
        }

        function showFullScheduleCelebration() {
            const overlay = document.getElementById('scheduleCelebrationOverlay');
            if (overlay) {
                overlay.style.display = 'flex';
                
                if ('speechSynthesis' in window) {
                    const utterance = new SpeechSynthesisUtterance('Congratulations! You completed your entire schedule today! You did an amazing job!');
                    speechSynthesis.speak(utterance);
                }
                
                for (let i = 0; i < 15; i++) {
                    setTimeout(() => createScheduleCelebrationEffect(), i * 100);
                }
            }
        }

        function hideScheduleCelebration() {
            const overlay = document.getElementById('scheduleCelebrationOverlay');
            if (overlay) {
                overlay.style.display = 'none';
            }
        }

        function goHome() {
            // Hide all apps
            const containers = document.querySelectorAll('.app-container');
            containers.forEach(container => container.classList.remove('active'));
            
            // Show main menu
            document.getElementById('mainMenu').style.display = 'block';
            document.getElementById('backButton').style.display = 'none';
        }

        // Add the missing CSS animations
        const style = document.createElement('style');
        style.textContent = `
            @keyframes celebrateSelection {
                0% { transform: scale(0.8); opacity: 0; }
                50% { transform: scale(1.1); }
                100% { transform: scale(1); opacity: 1; }
            }
            
            @keyframes starfall {
                0% {
                    transform: translateY(-20px) scale(0);
                    opacity: 1;
                }
                50% {
                    transform: translateY(20px) scale(1);
                    opacity: 1;
                }
                100% {
                    transform: translateY(100px) scale(0);
                    opacity: 0;
                }
            }
        `;
        document.head.appendChild(style);

        // Initialize when page loads
        document.addEventListener('DOMContentLoaded', init);
    </script>
</body>
</html>
